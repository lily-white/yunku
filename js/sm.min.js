$.smVersion="0.6.2";+function(e){"use strict";var t={autoInit:false,showPageLoadingIndicator:true,router:true,swipePanel:"left",swipePanelOnlyClose:true};e.smConfig=e.extend(t,e.config)}(Zepto);+function(e){"use strict";e.compareVersion=function(e,t){var i=e.split(".");var n=t.split(".");if(e===t)return 0;for(var r=0;r<i.length;r++){var a=parseInt(i[r]);if(!n[r])return 1;var s=parseInt(n[r]);if(a<s)return-1;if(a>s)return 1}return-1};e.getCurrentPage=function(){return e(".page-current")[0]||e(".page")[0]||document.body}}(Zepto);(function(e){"use strict";["width","height"].forEach(function(t){var i=t.replace(/./,function(e){return e[0].toUpperCase()});e.fn["outer"+i]=function(e){var i=this;if(i){var n=i[t]();var r={width:["left","right"],height:["top","bottom"]};r[t].forEach(function(t){if(e)n+=parseInt(i.css("margin-"+t),10)});return n}else{return null}}});e.support=function(){var e={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)};return e}();e.touchEvents={start:e.support.touch?"touchstart":"mousedown",move:e.support.touch?"touchmove":"mousemove",end:e.support.touch?"touchend":"mouseup"};e.getTranslate=function(e,t){var i,n,r,a;if(typeof t==="undefined"){t="x"}r=window.getComputedStyle(e,null);if(window.WebKitCSSMatrix){a=new WebKitCSSMatrix(r.webkitTransform==="none"?"":r.webkitTransform)}else{a=r.MozTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");i=a.toString().split(",")}if(t==="x"){if(window.WebKitCSSMatrix)n=a.m41;else if(i.length===16)n=parseFloat(i[12]);else n=parseFloat(i[4])}if(t==="y"){if(window.WebKitCSSMatrix)n=a.m42;else if(i.length===16)n=parseFloat(i[13]);else n=parseFloat(i[5])}return n||0};e.requestAnimationFrame=function(e){if(requestAnimationFrame)return requestAnimationFrame(e);else if(webkitRequestAnimationFrame)return webkitRequestAnimationFrame(e);else if(mozRequestAnimationFrame)return mozRequestAnimationFrame(e);else{return setTimeout(e,1e3/60)}};e.cancelAnimationFrame=function(e){if(cancelAnimationFrame)return cancelAnimationFrame(e);else if(webkitCancelAnimationFrame)return webkitCancelAnimationFrame(e);else if(mozCancelAnimationFrame)return mozCancelAnimationFrame(e);else{return clearTimeout(e)}};e.fn.dataset=function(){var t={},i=this[0].dataset;for(var n in i){var r=t[n]=i[n];if(r==="false")t[n]=false;else if(r==="true")t[n]=true;else if(parseFloat(r)===r*1)t[n]=r*1}return e.extend({},t,this[0].__eleData)};e.fn.data=function(t,i){var n=e(this).dataset();if(!t){return n}if(typeof i==="undefined"){var r=n[t],a=this[0].__eleData;if(a&&t in a){return a[t]}else{return r}}else{for(var s=0;s<this.length;s++){var o=this[s];if(t in n)delete o.dataset[t];if(!o.__eleData)o.__eleData={};o.__eleData[t]=i}return this}};function t(e,t){var i=e,n,r=this;function a(e){if(e.target!==this)return;t.call(this,e);for(n=0;n<i.length;n++){r.off(i[n],a)}}if(t){for(n=0;n<i.length;n++){r.on(i[n],a)}}}e.fn.animationEnd=function(e){t.call(this,["webkitAnimationEnd","animationend"],e);return this};e.fn.transitionEnd=function(e){t.call(this,["webkitTransitionEnd","transitionend"],e);return this};e.fn.transition=function(e){if(typeof e!=="string"){e=e+"ms"}for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransitionDuration=i.MozTransitionDuration=i.transitionDuration=e}return this};e.fn.transform=function(e){for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransform=i.MozTransform=i.transform=e}return this};e.fn.prevAll=function(t){var i=[];var n=this[0];if(!n)return e([]);while(n.previousElementSibling){var r=n.previousElementSibling;if(t){if(e(r).is(t))i.push(r)}else i.push(r);n=r}return e(i)};e.fn.nextAll=function(t){var i=[];var n=this[0];if(!n)return e([]);while(n.nextElementSibling){var r=n.nextElementSibling;if(t){if(e(r).is(t))i.push(r)}else i.push(r);n=r}return e(i)};e.fn.show=function(){var e={};function t(t){var i,n;if(!e[t]){i=document.createElement(t);document.body.appendChild(i);n=getComputedStyle(i,"").getPropertyValue("display");i.parentNode.removeChild(i);n==="none"&&(n="block");e[t]=n}return e[t]}return this.each(function(){this.style.display==="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")==="none");this.style.display=t(this.nodeName)})}})(Zepto);(function(e){"use strict";var t={};var i=navigator.userAgent;var n=i.match(/(Android);?[\s\/]+([\d.]+)?/);var r=i.match(/(iPad).*OS\s([\d_]+)/);var a=i.match(/(iPod)(.*OS\s([\d_]+))?/);var s=!r&&i.match(/(iPhone\sOS)\s([\d_]+)/);t.ios=t.android=t.iphone=t.ipad=t.androidChrome=false;if(n){t.os="android";t.osVersion=n[2];t.android=true;t.androidChrome=i.toLowerCase().indexOf("chrome")>=0}if(r||s||a){t.os="ios";t.ios=true}if(s&&!a){t.osVersion=s[2].replace(/_/g,".");t.iphone=true}if(r){t.osVersion=r[2].replace(/_/g,".");t.ipad=true}if(a){t.osVersion=a[3]?a[3].replace(/_/g,"."):null;t.iphone=true}if(t.ios&&t.osVersion&&i.indexOf("Version/")>=0){if(t.osVersion.split(".")[0]==="10"){t.osVersion=i.toLowerCase().split("version/")[1].split(" ")[0]}}t.webView=(s||r||a)&&i.match(/.*AppleWebKit(?!.*Safari)/i);if(t.os&&t.os==="ios"){var o=t.osVersion.split(".");t.minimalUi=!t.webView&&(a||s)&&(o[0]*1===7?o[1]*1>=1:o[0]*1>7)&&e('meta[name="viewport"]').length>0&&e('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var l=e(window).width();var c=e(window).height();t.statusBar=false;if(t.webView&&l*c===screen.width*screen.height){t.statusBar=true}else{t.statusBar=false}var h=[];t.pixelRatio=window.devicePixelRatio||1;h.push("pixel-ratio-"+Math.floor(t.pixelRatio));if(t.pixelRatio>=2){h.push("retina")}if(t.os){h.push(t.os,t.os+"-"+t.osVersion.split(".")[0],t.os+"-"+t.osVersion.replace(/\./g,"-"));if(t.os==="ios"){var f=parseInt(t.osVersion.split(".")[0],10);for(var u=f-1;u>=6;u--){h.push("ios-gt-"+u)}}}if(t.statusBar){h.push("with-statusbar-overlay")}else{e("html").removeClass("with-statusbar-overlay")}if(h.length>0)e("html").addClass(h.join(" "));t.isWeixin=/MicroMessenger/i.test(i);e.device=t})(Zepto);(function(){"use strict";function e(t,n){var r;n=n||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=n.touchBoundary||10;this.layer=t;this.tapDelay=n.tapDelay||200;this.tapTimeout=n.tapTimeout||700;if(e.notNeeded(t)){return}function a(e,t){return function(){return e.apply(t,arguments)}}var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var o=this;for(var l=0,c=s.length;l<c;l++){o[s[l]]=a(o[s[l]],o)}if(i){t.addEventListener("mouseover",this.onMouse,true);t.addEventListener("mousedown",this.onMouse,true);t.addEventListener("mouseup",this.onMouse,true)}t.addEventListener("click",this.onClick,true);t.addEventListener("touchstart",this.onTouchStart,false);t.addEventListener("touchmove",this.onTouchMove,false);t.addEventListener("touchend",this.onTouchEnd,false);t.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){t.removeEventListener=function(e,i,n){var r=Node.prototype.removeEventListener;if(e==="click"){r.call(t,e,i.hijacked||i,n)}else{r.call(t,e,i,n)}};t.addEventListener=function(e,i,n){var r=Node.prototype.addEventListener;if(e==="click"){r.call(t,e,i.hijacked||(i.hijacked=function(e){if(!e.propagationStopped){i(e)}}),n)}else{r.call(t,e,i,n)}}}if(typeof t.onclick==="function"){r=t.onclick;t.addEventListener("click",function(e){r(e)},false);t.onclick=null}}var t=navigator.userAgent.indexOf("Windows Phone")>=0;var i=navigator.userAgent.indexOf("Android")>0&&!t;var n=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t;var r=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent);var a=n&&/OS [6-7]_\d/.test(navigator.userAgent);var s=navigator.userAgent.indexOf("BB10")>0;var o=false;e.prototype.needsClick=function(e){var t=e;while(t&&t.tagName.toUpperCase()!=="BODY"){if(t.tagName.toUpperCase()==="LABEL"){o=true;if(/\bneedsclick\b/.test(t.className))return true}t=t.parentNode}switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled){return true}break;case"input":if(n&&e.type==="file"||e.disabled){return true}break;case"label":case"iframe":case"video":return true}return/\bneedsclick\b/.test(e.className)};e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return true;case"select":return!i;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}};e.prototype.sendClick=function(e,t){var i,n;if(document.activeElement&&document.activeElement!==e){document.activeElement.blur()}n=t.changedTouches[0];i=document.createEvent("MouseEvents");i.initMouseEvent(this.determineEventType(e),true,true,window,1,n.screenX,n.screenY,n.clientX,n.clientY,false,false,false,false,0,null);i.forwardedTouchEvent=true;e.dispatchEvent(i)};e.prototype.determineEventType=function(e){if(i&&e.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};e.prototype.focus=function(e){var t;var i=["date","time","month","number","email"];if(n&&e.setSelectionRange&&i.indexOf(e.type)===-1){t=e.value.length;e.setSelectionRange(t,t)}else{e.focus()}};e.prototype.updateScrollParent=function(e){var t,i;t=e.fastClickScrollParent;if(!t||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i;e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}if(t){t.fastClickLastScrollTop=t.scrollTop}};e.prototype.getTargetElementFromEventTarget=function(e){if(e.nodeType===Node.TEXT_NODE){return e.parentNode}return e};e.prototype.onTouchStart=function(e){var t,i,a;if(e.targetTouches.length>1){return true}t=this.getTargetElementFromEventTarget(e.target);i=e.targetTouches[0];if(n){a=window.getSelection();if(a.rangeCount&&!a.isCollapsed){return true}if(!r){if(i.identifier&&i.identifier===this.lastTouchIdentifier){e.preventDefault();return false}this.lastTouchIdentifier=i.identifier;this.updateScrollParent(t)}}this.trackingClick=true;this.trackingClickStart=e.timeStamp;this.targetElement=t;this.touchStartX=i.pageX;this.touchStartY=i.pageY;if(e.timeStamp-this.lastClickTime<this.tapDelay){e.preventDefault()}return true};e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],i=this.touchBoundary;if(Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i){return true}return false};e.prototype.onTouchMove=function(e){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e)){this.trackingClick=false;this.targetElement=null}return true};e.prototype.findControl=function(e){if(e.control!==undefined){return e.control}if(e.htmlFor){return document.getElementById(e.htmlFor)}return e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};e.prototype.onTouchEnd=function(e){var t,s,o,l,c,h=this.targetElement;if(!this.trackingClick){return true}if(e.timeStamp-this.lastClickTime<this.tapDelay){this.cancelNextClick=true;return true}if(e.timeStamp-this.trackingClickStart>this.tapTimeout){return true}var f=["date","time","month"];if(f.indexOf(e.target.type)!==-1){return false}this.cancelNextClick=false;this.lastClickTime=e.timeStamp;s=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(a){c=e.changedTouches[0];h=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||h;h.fastClickScrollParent=this.targetElement.fastClickScrollParent}o=h.tagName.toLowerCase();if(o==="label"){t=this.findControl(h);if(t){this.focus(h);if(i){return false}h=t}}else if(this.needsFocus(h)){if(e.timeStamp-s>100||n&&window.top!==window&&o==="input"){this.targetElement=null;return false}this.focus(h);this.sendClick(h,e);if(!n||o!=="select"){this.targetElement=null;e.preventDefault()}return false}if(n&&!r){l=h.fastClickScrollParent;if(l&&l.fastClickLastScrollTop!==l.scrollTop){return true}}if(!this.needsClick(h)){e.preventDefault();this.sendClick(h,e)}return false};e.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};e.prototype.onMouse=function(e){if(!this.targetElement){return true}if(e.forwardedTouchEvent){return true}if(!e.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(e.stopImmediatePropagation){e.stopImmediatePropagation()}else{e.propagationStopped=true}e.stopPropagation();if(!o){e.preventDefault()}return false}return true};e.prototype.onClick=function(e){var t;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(e.target.type==="submit"&&e.detail===0){return true}t=this.onMouse(e);if(!t){this.targetElement=null}return t};e.prototype.destroy=function(){var e=this.layer;if(i){e.removeEventListener("mouseover",this.onMouse,true);e.removeEventListener("mousedown",this.onMouse,true);e.removeEventListener("mouseup",this.onMouse,true)}e.removeEventListener("click",this.onClick,true);e.removeEventListener("touchstart",this.onTouchStart,false);e.removeEventListener("touchmove",this.onTouchMove,false);e.removeEventListener("touchend",this.onTouchEnd,false);e.removeEventListener("touchcancel",this.onTouchCancel,false)};e.notNeeded=function(e){var t;var n;var r;var a;if(typeof window.ontouchstart==="undefined"){return true}n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(n){if(i){t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1){return true}if(n>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(s){r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(r[1]>=10&&r[2]>=3){t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(e.style.msTouchAction==="none"||e.style.touchAction==="manipulation"){return true}a=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(a>=27){t=document.querySelector("meta[name=viewport]");if(t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(e.style.touchAction==="none"||e.style.touchAction==="manipulation"){return true}return false};e.attach=function(t,i){return new e(t,i)};window.FastClick=e})();+function(e){"use strict";var t=document.createElement("div");e.modalStack=[];e.modalStackClearQueue=function(){if(e.modalStack.length){e.modalStack.shift()()}};e.modal=function(i){i=i||{};var r="";var a="";if(i.buttons&&i.buttons.length>0){for(var s=0;s<i.buttons.length;s++){a+='<span class="modal-button'+(i.buttons[s].bold?" modal-button-bold":"")+'">'+i.buttons[s].text+"</span>"}}var o=i.extraClass||"";var l=i.title?'<div class="modal-title">'+i.title+"</div>":"";var c=i.text?'<div class="modal-text">'+i.text+"</div>":"";var h=i.afterText?i.afterText:"";var f=!i.buttons||i.buttons.length===0?"modal-no-buttons":"";var u=i.verticalButtons?"modal-buttons-vertical":"";r='<div class="modal '+o+" "+f+'"><div class="modal-inner">'+(l+c+h)+'</div><div class="modal-buttons '+u+'">'+a+"</div></div>";t.innerHTML=r;var p=e(t).children();e(n.modalContainer).append(p[0]);p.find(".modal-button").each(function(t,n){e(n).on("click",function(n){if(i.buttons[t].close!==false)e.closeModal(p);if(i.buttons[t].onClick)i.buttons[t].onClick(p,n);if(i.onClick)i.onClick(p,t)})});e.openModal(p);return p[0]};e.alert=function(t,i,r){if(typeof i==="function"){r=arguments[1];i=undefined}return e.modal({text:t||"",title:typeof i==="undefined"?n.modalTitle:i,buttons:[{text:n.modalButtonOk,bold:true,onClick:r}]})};e.confirm=function(t,i,r,a){if(typeof i==="function"){a=arguments[2];r=arguments[1];i=undefined}return e.modal({text:t||"",title:typeof i==="undefined"?n.modalTitle:i,buttons:[{text:n.modalButtonCancel,onClick:a},{text:n.modalButtonOk,bold:true,onClick:r}]})};e.prompt=function(t,i,r,a){if(typeof i==="function"){a=arguments[2];r=arguments[1];i=undefined}return e.modal({text:t||"",title:typeof i==="undefined"?n.modalTitle:i,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:n.modalButtonCancel},{text:n.modalButtonOk,bold:true}],onClick:function(t,i){if(i===0&&a)a(e(t).find(".modal-text-input").val());if(i===1&&r)r(e(t).find(".modal-text-input").val())}})};e.modalLogin=function(t,i,r,a){if(typeof i==="function"){a=arguments[2];r=arguments[1];i=undefined}return e.modal({text:t||"",title:typeof i==="undefined"?n.modalTitle:i,afterText:'<input type="text" name="modal-username" placeholder="'+n.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+n.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:n.modalButtonCancel},{text:n.modalButtonOk,bold:true}],onClick:function(t,i){var n=e(t).find('.modal-text-input[name="modal-username"]').val();var s=e(t).find('.modal-text-input[name="modal-password"]').val();if(i===0&&a)a(n,s);if(i===1&&r)r(n,s)}})};e.modalPassword=function(t,i,r,a){if(typeof i==="function"){a=arguments[2];r=arguments[1];i=undefined}return e.modal({text:t||"",title:typeof i==="undefined"?n.modalTitle:i,afterText:'<input type="password" name="modal-password" placeholder="'+n.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:n.modalButtonCancel},{text:n.modalButtonOk,bold:true}],onClick:function(t,i){var n=e(t).find('.modal-text-input[name="modal-password"]').val();if(i===0&&a)a(n);if(i===1&&r)r(n)}})};e.showPreloader=function(t){e.hidePreloader();e.showPreloader.preloaderModal=e.modal({title:t||n.modalPreloaderTitle,text:'<div class="preloader"></div>'});return e.showPreloader.preloaderModal};e.hidePreloader=function(){e.showPreloader.preloaderModal&&e.closeModal(e.showPreloader.preloaderModal)};e.showIndicator=function(){if(e(".preloader-indicator-modal")[0])return;e(n.modalContainer).append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')};e.hideIndicator=function(){e(".preloader-indicator-overlay, .preloader-indicator-modal").remove()};e.actions=function(i){var r,a,s;i=i||[];if(i.length>0&&!e.isArray(i[0])){i=[i]}var o;var l="";for(var c=0;c<i.length;c++){for(var h=0;h<i[c].length;h++){if(h===0)l+='<div class="actions-modal-group">';var f=i[c][h];var u=f.label?"actions-modal-label":"actions-modal-button";if(f.bold)u+=" actions-modal-button-bold";if(f.color)u+=" color-"+f.color;if(f.bg)u+=" bg-"+f.bg;if(f.disabled)u+=" disabled";l+='<span class="'+u+'">'+f.text+"</span>";if(h===i[c].length-1)l+="</div>"}}o='<div class="actions-modal">'+l+"</div>";t.innerHTML=o;r=e(t).children();e(n.modalContainer).append(r[0]);a=".actions-modal-group";s=".actions-modal-button";var p=r.find(a);p.each(function(t,n){var a=t;e(n).children().each(function(t,n){var o=t;var l=i[a][o];var c;if(e(n).is(s))c=e(n);if(c){c.on("click",function(t){if(l.close!==false)e.closeModal(r);if(l.onClick)l.onClick(r,t)})}})});e.openModal(r);return r[0]};e.popup=function(t,i){if(typeof i==="undefined")i=true;if(typeof t==="string"&&t.indexOf("<")>=0){var r=document.createElement("div");r.innerHTML=t.trim();if(r.childNodes.length>0){t=r.childNodes[0];if(i)t.classList.add("remove-on-close");e(n.modalContainer).append(t)}else return false}t=e(t);if(t.length===0)return false;t.show();t.find(".content").scroller("refresh");if(t.find("."+n.viewClass).length>0){e.sizeNavbars(t.find("."+n.viewClass)[0])}e.openModal(t);return t[0]};e.pickerModal=function(t,i){if(typeof i==="undefined")i=true;if(typeof t==="string"&&t.indexOf("<")>=0){t=e(t);if(t.length>0){if(i)t.addClass("remove-on-close");e(n.modalContainer).append(t[0])}else return false}t=e(t);if(t.length===0)return false;t.show();e.openModal(t);return t[0]};e.loginScreen=function(t){if(!t)t=".login-screen";t=e(t);if(t.length===0)return false;t.show();if(t.find("."+n.viewClass).length>0){e.sizeNavbars(t.find("."+n.viewClass)[0])}e.openModal(t);return t[0]};e.toast=function(t,i,n){var r=e('<div class="modal toast '+(n||"")+'">'+t+"</div>").appendTo(document.body);e.openModal(r,function(){setTimeout(function(){e.closeModal(r)},i||2e3)})};e.openModal=function(t,i){t=e(t);var r=t.hasClass("modal"),a=!t.hasClass("toast");if(e(".modal.modal-in:not(.modal-out)").length&&n.modalStack&&r&&a){e.modalStack.push(function(){e.openModal(t,i)});return}var s=t.hasClass("popup");var o=t.hasClass("login-screen");var l=t.hasClass("picker-modal");var c=t.hasClass("toast");if(r){t.show();t.css({marginTop:-Math.round(t.outerHeight()/2)+"px"})}if(c){t.css({marginLeft:-Math.round(t.outerWidth()/2/1.185)+"px"})}var h;if(!o&&!l&&!c){if(e(".modal-overlay").length===0&&!s){e(n.modalContainer).append('<div class="modal-overlay"></div>')}if(e(".popup-overlay").length===0&&s){e(n.modalContainer).append('<div class="popup-overlay"></div>')}h=s?e(".popup-overlay"):e(".modal-overlay")}var f=t[0].clientLeft;t.trigger("open");if(l){e(n.modalContainer).addClass("with-picker-modal")}if(!o&&!l&&!c)h.addClass("modal-overlay-visible");t.removeClass("modal-out").addClass("modal-in").transitionEnd(function(e){if(t.hasClass("modal-out"))t.trigger("closed");else t.trigger("opened")});if(typeof i==="function"){i.call(this)}return true};e.closeModal=function(t){t=e(t||".modal-in");if(typeof t!=="undefined"&&t.length===0){return}var i=t.hasClass("modal"),r=t.hasClass("popup"),a=t.hasClass("toast"),s=t.hasClass("login-screen"),o=t.hasClass("picker-modal"),l=t.hasClass("remove-on-close"),c=r?e(".popup-overlay"):e(".modal-overlay");if(r){if(t.length===e(".popup.modal-in").length){c.removeClass("modal-overlay-visible")}}else if(!(o||a)){c.removeClass("modal-overlay-visible")}t.trigger("close");if(o){e(n.modalContainer).removeClass("with-picker-modal");e(n.modalContainer).addClass("picker-modal-closing")}t.removeClass("modal-in").addClass("modal-out").transitionEnd(function(i){if(t.hasClass("modal-out"))t.trigger("closed");else t.trigger("opened");if(o){e(n.modalContainer).removeClass("picker-modal-closing")}if(r||s||o){t.removeClass("modal-out").hide();if(l&&t.length>0){t.remove()}}else{t.remove()}});if(i&&n.modalStack){e.modalStackClearQueue()}return true};function i(t){var i=e(this);var r=i.attr("href");var a=i.dataset();var s;if(i.hasClass("open-popup")){if(a.popup){s=a.popup}else s=".popup";e.popup(s)}if(i.hasClass("close-popup")){if(a.popup){s=a.popup}else s=".popup.modal-in";e.closeModal(s)}if(i.hasClass("modal-overlay")){if(e(".modal.modal-in").length>0&&n.modalCloseByOutside)e.closeModal(".modal.modal-in");if(e(".actions-modal.modal-in").length>0&&n.actionsCloseByOutside)e.closeModal(".actions-modal.modal-in")}if(i.hasClass("popup-overlay")){if(e(".popup.modal-in").length>0&&n.popupCloseByOutside)e.closeModal(".popup.modal-in")}}e(document).on("click"," .modal-overlay, .popup-overlay, .close-popup, .open-popup, .close-picker",i);var n=e.modal.prototype.defaults={modalStack:true,modalButtonOk:"确定",modalButtonCancel:"取消",modalPreloaderTitle:"加载中",modalContainer:document.body}}(Zepto);+function(e){"use strict";var t=false;var i=function(i){var n=this;var r={monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["周日","周一","周二","周三","周四","周五","周六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],firstDay:1,weekendDays:[0,6],multiple:false,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:true,animate:true,closeOnSelect:true,monthPicker:true,monthPickerTemplate:'<div class="picker-calendar-month-picker">'+'<a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a>'+'<div class="current-month-value"></div>'+'<a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a>'+"</div>",yearPicker:true,yearPickerTemplate:'<div class="picker-calendar-year-picker">'+'<a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a>'+'<span class="current-year-value"></span>'+'<a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a>'+"</div>",weekHeader:true,scrollToInput:true,inputReadOnly:true,toolbar:true,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar">'+'<div class="toolbar-inner">'+"{{monthPicker}}"+"{{yearPicker}}"+"</div>"+"</div>"};i=i||{};for(var a in r){if(typeof i[a]==="undefined"){i[a]=r[a]}}n.params=i;n.initialized=false;n.inline=n.params.container?true:false;n.isH=n.params.direction==="horizontal";var s=n.isH?t?-1:1:1;n.animating=false;function o(e){e=new Date(e);var t=e.getFullYear();var i=e.getMonth();var r=i+1;var a=e.getDate();var s=e.getDay();return n.params.dateFormat.replace(/yyyy/g,t).replace(/yy/g,(t+"").substring(2)).replace(/mm/g,r<10?"0"+r:r).replace(/m/g,r).replace(/MM/g,n.params.monthNames[i]).replace(/M/g,n.params.monthNamesShort[i]).replace(/dd/g,a<10?"0"+a:a).replace(/d/g,a).replace(/DD/g,n.params.dayNames[s]).replace(/D/g,n.params.dayNamesShort[s])}n.addValue=function(e){if(n.params.multiple){if(!n.value)n.value=[];var t;for(var i=0;i<n.value.length;i++){if(new Date(e).getTime()===new Date(n.value[i]).getTime()){t=i}}if(typeof t==="undefined"){n.value.push(e)}else{n.value.splice(t,1)}n.updateValue()}else{n.value=[e];n.updateValue()}};n.setValue=function(e){n.value=e;n.updateValue()};n.updateValue=function(){n.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var t,i;for(t=0;t<n.value.length;t++){var r=new Date(n.value[t]);n.wrapper.find('.picker-calendar-day[data-date="'+r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate()+'"]').addClass("picker-calendar-day-selected")}if(n.params.onChange){n.params.onChange(n,n.value,n.value.map(o))}if(n.input&&n.input.length>0){if(n.params.formatValue)i=n.params.formatValue(n,n.value);else{i=[];for(t=0;t<n.value.length;t++){i.push(o(n.value[t]))}i=i.join(", ")}e(n.input).val(i);e(n.input).trigger("change")}};n.initCalendarEvents=function(){var i;var r=true;var a,o,l,c,h,f,u,p,d,m,v,g,y,w,x;function T(e){if(o||a)return;a=true;l=f=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX;c=f=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY;u=(new Date).getTime();y=0;r=true;x=undefined;d=m=n.monthsTranslate}function C(e){if(!a)return;h=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX;f=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;if(typeof x==="undefined"){x=!!(x||Math.abs(f-c)>Math.abs(h-l))}if(n.isH&&x){a=false;return}e.preventDefault();if(n.animating){a=false;return}r=false;if(!o){o=true;v=n.wrapper[0].offsetWidth;g=n.wrapper[0].offsetHeight;n.wrapper.transition(0)}e.preventDefault();w=n.isH?h-l:f-c;y=w/(n.isH?v:g);m=(n.monthsTranslate*s+y)*100;n.wrapper.transform("translate3d("+(n.isH?m:0)+"%, "+(n.isH?0:m)+"%, 0)")}function b(e){if(!a||!o){a=o=false;return}a=o=false;p=(new Date).getTime();if(p-u<300){if(Math.abs(w)<10){n.resetMonth()}else if(w>=10){if(t)n.nextMonth();else n.prevMonth()}else{if(t)n.prevMonth();else n.nextMonth()}}else{if(y<=-.5){if(t)n.prevMonth();else n.nextMonth()}else if(y>=.5){if(t)n.nextMonth();else n.prevMonth()}else{n.resetMonth()}}setTimeout(function(){r=true},100)}function k(t){if(!r)return;var i=e(t.target).parents(".picker-calendar-day");if(i.length===0&&e(t.target).hasClass("picker-calendar-day")){i=e(t.target)}if(i.length===0)return;if(i.hasClass("picker-calendar-day-selected")&&!n.params.multiple)return;if(i.hasClass("picker-calendar-day-disabled"))return;if(i.hasClass("picker-calendar-day-next"))n.nextMonth();if(i.hasClass("picker-calendar-day-prev"))n.prevMonth();var a=i.attr("data-year");var s=i.attr("data-month");var o=i.attr("data-day");if(n.params.onDayClick){n.params.onDayClick(n,i[0],a,s,o)}n.addValue(new Date(a,s,o).getTime());if(n.params.closeOnSelect)n.close()}n.container.find(".picker-calendar-prev-month").on("click",n.prevMonth);n.container.find(".picker-calendar-next-month").on("click",n.nextMonth);n.container.find(".picker-calendar-prev-year").on("click",n.prevYear);n.container.find(".picker-calendar-next-year").on("click",n.nextYear);n.wrapper.on("click",k);if(n.params.touchMove){n.wrapper.on(e.touchEvents.start,T);n.wrapper.on(e.touchEvents.move,C);n.wrapper.on(e.touchEvents.end,b)}n.container[0].f7DestroyCalendarEvents=function(){n.container.find(".picker-calendar-prev-month").off("click",n.prevMonth);n.container.find(".picker-calendar-next-month").off("click",n.nextMonth);n.container.find(".picker-calendar-prev-year").off("click",n.prevYear);n.container.find(".picker-calendar-next-year").off("click",n.nextYear);n.wrapper.off("click",k);if(n.params.touchMove){n.wrapper.off(e.touchEvents.start,T);n.wrapper.off(e.touchEvents.move,C);n.wrapper.off(e.touchEvents.end,b)}}};n.destroyCalendarEvents=function(e){if("f7DestroyCalendarEvents"in n.container[0])n.container[0].f7DestroyCalendarEvents()};n.daysInMonth=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()};n.monthHTML=function(e,t){e=new Date(e);var i=e.getFullYear(),r=e.getMonth(),a=e.getDate();if(t==="next"){if(r===11)e=new Date(i+1,0);else e=new Date(i,r+1,1)}if(t==="prev"){if(r===0)e=new Date(i-1,11);else e=new Date(i,r-1,1)}if(t==="next"||t==="prev"){r=e.getMonth();i=e.getFullYear()}var s=n.daysInMonth(new Date(e.getFullYear(),e.getMonth()).getTime()-10*24*60*60*1e3),o=n.daysInMonth(e),l=new Date(e.getFullYear(),e.getMonth()).getDay();if(l===0)l=7;var c,h=[],f,u,p=6,d=7,m="",v=0+(n.params.firstDay-1),g=(new Date).setHours(0,0,0,0),y=n.params.minDate?new Date(n.params.minDate).getTime():null,w=n.params.maxDate?new Date(n.params.maxDate).getTime():null;if(n.value&&n.value.length){for(f=0;f<n.value.length;f++){h.push(new Date(n.value[f]).setHours(0,0,0,0))}}for(f=1;f<=p;f++){var x="";var T=f;for(u=1;u<=d;u++){var C=u;v++;var b=v-l;var k="";if(b<0){b=s+b+1;k+=" picker-calendar-day-prev";c=new Date(r-1<0?i-1:i,r-1<0?11:r-1,b).getTime()}else{b=b+1;if(b>o){b=b-o;k+=" picker-calendar-day-next";c=new Date(r+1>11?i+1:i,r+1>11?0:r+1,b).getTime()}else{c=new Date(i,r,b).getTime()}}if(c===g)k+=" picker-calendar-day-today";if(h.indexOf(c)>=0)k+=" picker-calendar-day-selected";if(n.params.weekendDays.indexOf(C-1)>=0){k+=" picker-calendar-day-weekend"}if(y&&c<y||w&&c>w){k+=" picker-calendar-day-disabled"}c=new Date(c);var S=c.getFullYear();var E=c.getMonth();x+='<div data-year="'+S+'" data-month="'+E+'" data-day="'+b+'" class="picker-calendar-day'+k+'" data-date="'+(S+"-"+E+"-"+b)+'"><span>'+b+"</span></div>"}m+='<div class="picker-calendar-row">'+x+"</div>"}m='<div class="picker-calendar-month" data-year="'+i+'" data-month="'+r+'">'+m+"</div>";return m};n.animating=false;n.updateCurrentMonthYear=function(e){if(typeof e==="undefined"){n.currentMonth=parseInt(n.months.eq(1).attr("data-month"),10);n.currentYear=parseInt(n.months.eq(1).attr("data-year"),10)}else{n.currentMonth=parseInt(n.months.eq(e==="next"?n.months.length-1:0).attr("data-month"),10);n.currentYear=parseInt(n.months.eq(e==="next"?n.months.length-1:0).attr("data-year"),10)}n.container.find(".current-month-value").text(n.params.monthNames[n.currentMonth]);n.container.find(".current-year-value").text(n.currentYear)};n.onMonthChangeStart=function(e){n.updateCurrentMonthYear(e);n.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var t=e==="next"?n.months.length-1:0;n.months.eq(t).addClass("picker-calendar-month-current");n.months.eq(e==="next"?t-1:t+1).addClass(e==="next"?"picker-calendar-month-prev":"picker-calendar-month-next");if(n.params.onMonthYearChangeStart){n.params.onMonthYearChangeStart(n,n.currentYear,n.currentMonth)}};n.onMonthChangeEnd=function(e,t){n.animating=false;var i,r,a;n.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove();
if(typeof e==="undefined"){e="next";t=true}if(!t){a=n.monthHTML(new Date(n.currentYear,n.currentMonth),e)}else{n.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove();r=n.monthHTML(new Date(n.currentYear,n.currentMonth),"prev");i=n.monthHTML(new Date(n.currentYear,n.currentMonth),"next")}if(e==="next"||t){n.wrapper.append(a||i)}if(e==="prev"||t){n.wrapper.prepend(a||r)}n.months=n.wrapper.find(".picker-calendar-month");n.setMonthsTranslate(n.monthsTranslate);if(n.params.onMonthAdd){n.params.onMonthAdd(n,e==="next"?n.months.eq(n.months.length-1)[0]:n.months.eq(0)[0])}if(n.params.onMonthYearChangeEnd){n.params.onMonthYearChangeEnd(n,n.currentYear,n.currentMonth)}};n.setMonthsTranslate=function(e){e=e||n.monthsTranslate||0;if(typeof n.monthsTranslate==="undefined")n.monthsTranslate=e;n.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var t=-(e+1)*100*s;var i=-e*100*s;var r=-(e-1)*100*s;n.months.eq(0).transform("translate3d("+(n.isH?t:0)+"%, "+(n.isH?0:t)+"%, 0)").addClass("picker-calendar-month-prev");n.months.eq(1).transform("translate3d("+(n.isH?i:0)+"%, "+(n.isH?0:i)+"%, 0)").addClass("picker-calendar-month-current");n.months.eq(2).transform("translate3d("+(n.isH?r:0)+"%, "+(n.isH?0:r)+"%, 0)").addClass("picker-calendar-month-next")};n.nextMonth=function(t){if(typeof t==="undefined"||typeof t==="object"){t="";if(!n.params.animate)t=0}var i=parseInt(n.months.eq(n.months.length-1).attr("data-month"),10);var r=parseInt(n.months.eq(n.months.length-1).attr("data-year"),10);var a=new Date(r,i);var o=a.getTime();var l=n.animating?false:true;if(n.params.maxDate){if(o>new Date(n.params.maxDate).getTime()){return n.resetMonth()}}n.monthsTranslate--;if(i===n.currentMonth){var c=-n.monthsTranslate*100*s;var h=e(n.monthHTML(o,"next")).transform("translate3d("+(n.isH?c:0)+"%, "+(n.isH?0:c)+"%, 0)").addClass("picker-calendar-month-next");n.wrapper.append(h[0]);n.months=n.wrapper.find(".picker-calendar-month");if(n.params.onMonthAdd){n.params.onMonthAdd(n,n.months.eq(n.months.length-1)[0])}}n.animating=true;n.onMonthChangeStart("next");var f=n.monthsTranslate*100*s;n.wrapper.transition(t).transform("translate3d("+(n.isH?f:0)+"%, "+(n.isH?0:f)+"%, 0)");if(l){n.wrapper.transitionEnd(function(){n.onMonthChangeEnd("next")})}if(!n.params.animate){n.onMonthChangeEnd("next")}};n.prevMonth=function(t){if(typeof t==="undefined"||typeof t==="object"){t="";if(!n.params.animate)t=0}var i=parseInt(n.months.eq(0).attr("data-month"),10);var r=parseInt(n.months.eq(0).attr("data-year"),10);var a=new Date(r,i+1,-1);var o=a.getTime();var l=n.animating?false:true;if(n.params.minDate){if(o<new Date(n.params.minDate).getTime()){return n.resetMonth()}}n.monthsTranslate++;if(i===n.currentMonth){var c=-n.monthsTranslate*100*s;var h=e(n.monthHTML(o,"prev")).transform("translate3d("+(n.isH?c:0)+"%, "+(n.isH?0:c)+"%, 0)").addClass("picker-calendar-month-prev");n.wrapper.prepend(h[0]);n.months=n.wrapper.find(".picker-calendar-month");if(n.params.onMonthAdd){n.params.onMonthAdd(n,n.months.eq(0)[0])}}n.animating=true;n.onMonthChangeStart("prev");var f=n.monthsTranslate*100*s;n.wrapper.transition(t).transform("translate3d("+(n.isH?f:0)+"%, "+(n.isH?0:f)+"%, 0)");if(l){n.wrapper.transitionEnd(function(){n.onMonthChangeEnd("prev")})}if(!n.params.animate){n.onMonthChangeEnd("prev")}};n.resetMonth=function(e){if(typeof e==="undefined")e="";var t=n.monthsTranslate*100*s;n.wrapper.transition(e).transform("translate3d("+(n.isH?t:0)+"%, "+(n.isH?0:t)+"%, 0)")};n.setYearMonth=function(e,t,i){if(typeof e==="undefined")e=n.currentYear;if(typeof t==="undefined")t=n.currentMonth;if(typeof i==="undefined"||typeof i==="object"){i="";if(!n.params.animate)i=0}var r;if(e<n.currentYear){r=new Date(e,t+1,-1).getTime()}else{r=new Date(e,t).getTime()}if(n.params.maxDate&&r>new Date(n.params.maxDate).getTime()){return false}if(n.params.minDate&&r<new Date(n.params.minDate).getTime()){return false}var a=new Date(n.currentYear,n.currentMonth).getTime();var o=r>a?"next":"prev";var l=n.monthHTML(new Date(e,t));n.monthsTranslate=n.monthsTranslate||0;var c=n.monthsTranslate;var h,f;var u=n.animating?false:true;if(r>a){n.monthsTranslate--;if(!n.animating)n.months.eq(n.months.length-1).remove();n.wrapper.append(l);n.months=n.wrapper.find(".picker-calendar-month");h=-(c-1)*100*s;n.months.eq(n.months.length-1).transform("translate3d("+(n.isH?h:0)+"%, "+(n.isH?0:h)+"%, 0)").addClass("picker-calendar-month-next")}else{n.monthsTranslate++;if(!n.animating)n.months.eq(0).remove();n.wrapper.prepend(l);n.months=n.wrapper.find(".picker-calendar-month");h=-(c+1)*100*s;n.months.eq(0).transform("translate3d("+(n.isH?h:0)+"%, "+(n.isH?0:h)+"%, 0)").addClass("picker-calendar-month-prev")}if(n.params.onMonthAdd){n.params.onMonthAdd(n,o==="next"?n.months.eq(n.months.length-1)[0]:n.months.eq(0)[0])}n.animating=true;n.onMonthChangeStart(o);f=n.monthsTranslate*100*s;n.wrapper.transition(i).transform("translate3d("+(n.isH?f:0)+"%, "+(n.isH?0:f)+"%, 0)");if(u){n.wrapper.transitionEnd(function(){n.onMonthChangeEnd(o,true)})}if(!n.params.animate){n.onMonthChangeEnd(o)}};n.nextYear=function(){n.setYearMonth(n.currentYear+1)};n.prevYear=function(){n.setYearMonth(n.currentYear-1)};n.layout=function(){var e="";var t="";var i;var r=n.value&&n.value.length?n.value[0]:(new Date).setHours(0,0,0,0);var a=n.monthHTML(r,"prev");var s=n.monthHTML(r);var o=n.monthHTML(r,"next");var l='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(a+s+o)+"</div></div>";var c="";if(n.params.weekHeader){for(i=0;i<7;i++){var h=i+n.params.firstDay>6?i-7+n.params.firstDay:i+n.params.firstDay;var f=n.params.dayNamesShort[h];c+='<div class="picker-calendar-week-day '+(n.params.weekendDays.indexOf(h)>=0?"picker-calendar-week-day-weekend":"")+'"> '+f+"</div>"}c='<div class="picker-calendar-week-days">'+c+"</div>"}t="picker-modal picker-calendar "+(n.params.cssClass||"");var u=n.params.toolbar?n.params.toolbarTemplate.replace(/{{closeText}}/g,n.params.toolbarCloseText):"";if(n.params.toolbar){u=n.params.toolbarTemplate.replace(/{{closeText}}/g,n.params.toolbarCloseText).replace(/{{monthPicker}}/g,n.params.monthPicker?n.params.monthPickerTemplate:"").replace(/{{yearPicker}}/g,n.params.yearPicker?n.params.yearPickerTemplate:"")}e='<div class="'+t+'">'+u+'<div class="picker-modal-inner">'+c+l+"</div>"+"</div>";n.pickerHTML=e};function l(t){t.preventDefault();if(e.device.isWeixin&&e.device.android&&n.params.inputReadOnly){this.focus();this.blur()}if(n.opened)return;n.open();if(n.params.scrollToInput){var i=n.input.parents(".content");if(i.length===0)return;var r=parseInt(i.css("padding-top"),10),a=parseInt(i.css("padding-bottom"),10),s=i[0].offsetHeight-r-n.container.height(),o=i[0].scrollHeight-r-n.container.height(),l;var c=n.input.offset().top-r+n.input[0].offsetHeight;if(c>s){var h=i.scrollTop()+c-s;if(h+s>o){l=h+s-o+a;if(s===o){l=n.container.height()}i.css({"padding-bottom":l+"px"})}i.scrollTop(h,300)}}}function c(t){if(n.input&&n.input.length>0){if(t.target!==n.input[0]&&e(t.target).parents(".picker-modal").length===0)n.close()}else{if(e(t.target).parents(".picker-modal").length===0)n.close()}}if(n.params.input){n.input=e(n.params.input);if(n.input.length>0){if(n.params.inputReadOnly)n.input.prop("readOnly",true);if(!n.inline){n.input.on("click",l)}}}if(!n.inline)e("html").on("click",c);function h(){n.opened=false;if(n.input&&n.input.length>0)n.input.parents(".content").css({"padding-bottom":""});if(n.params.onClose)n.params.onClose(n);n.destroyCalendarEvents()}n.opened=false;n.open=function(){var t=false;if(!n.opened){if(!n.value){if(n.params.value){n.value=n.params.value;t=true}}n.layout();if(n.inline){n.container=e(n.pickerHTML);n.container.addClass("picker-modal-inline");e(n.params.container).append(n.container)}else{n.container=e(e.pickerModal(n.pickerHTML));e(n.container).on("close",function(){h()})}n.container[0].f7Calendar=n;n.wrapper=n.container.find(".picker-calendar-months-wrapper");n.months=n.wrapper.find(".picker-calendar-month");n.updateCurrentMonthYear();n.monthsTranslate=0;n.setMonthsTranslate();n.initCalendarEvents();if(t)n.updateValue()}n.opened=true;n.initialized=true;if(n.params.onMonthAdd){n.months.each(function(){n.params.onMonthAdd(n,this)})}if(n.params.onOpen)n.params.onOpen(n)};n.close=function(){if(!n.opened||n.inline)return;e.closeModal(n.container);return};n.destroy=function(){n.close();if(n.params.input&&n.input.length>0){n.input.off("click",l)}e("html").off("click",c)};if(n.inline){n.open()}return n};e.fn.calendar=function(t){return this.each(function(){var n=e(this);if(!n[0])return;var r={};if(n[0].tagName.toUpperCase()==="INPUT"){r.input=n}else{r.container=n}new i(e.extend(r,t))})};e.initCalendar=function(t){var i=t?e(t):e(document.body);i.find("[data-toggle='date']").each(function(){e(this).calendar()})}}(Zepto);+function(e){"use strict";var t=function(t){var i=this;var n={updateValuesOnMomentum:false,updateValuesOnTouchmove:true,rotateEffect:false,momentumRatio:7,freeMode:false,scrollToInput:true,inputReadOnly:true,toolbar:true,toolbarCloseText:"确定",toolbarTemplate:'<header class="bar bar-nav">                <button class="button button-link pull-right close-picker">确定</button>                <h1 class="title">请选择</h1>                </header>'};t=t||{};for(var r in n){if(typeof t[r]==="undefined"){t[r]=n[r]}}i.params=t;i.cols=[];i.initialized=false;i.inline=i.params.container?true:false;var a=e.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!e.device.android;i.setValue=function(e,t){var n=0;for(var r=0;r<i.cols.length;r++){if(i.cols[r]&&!i.cols[r].divider){i.cols[r].setValue(e[n],t);n++}}};i.updateValue=function(){var t=[];var n=[];for(var r=0;r<i.cols.length;r++){if(!i.cols[r].divider){t.push(i.cols[r].value);n.push(i.cols[r].displayValue)}}if(t.indexOf(undefined)>=0){return}i.value=t;i.displayValue=n;if(i.params.onChange){i.params.onChange(i,i.value,i.displayValue)}if(i.input&&i.input.length>0){e(i.input).val(i.params.formatValue?i.params.formatValue(i,i.value,i.displayValue):i.value.join(" "));e(i.input).trigger("change")}};i.initPickerCol=function(t,n){var r=e(t);var s=r.index();var o=i.cols[s];if(o.divider)return;o.container=r;o.wrapper=o.container.find(".picker-items-col-wrapper");o.items=o.wrapper.find(".picker-item");var l,c;var h,f,u,p,d;o.replaceValues=function(e,t){o.destroyEvents();o.values=e;o.displayValues=t;var n=i.columnHTML(o,true);o.wrapper.html(n);o.items=o.wrapper.find(".picker-item");o.calcSize();o.setValue(o.values[0],0,true);o.initEvents()};o.calcSize=function(){if(i.params.rotateEffect){o.container.removeClass("picker-items-col-absolute");if(!o.width)o.container.css({width:""})}var t,n;t=0;n=o.container[0].offsetHeight;h=o.wrapper[0].offsetHeight;f=o.items[0].offsetHeight;u=f*o.items.length;p=n/2-u+f/2;d=n/2-f/2;if(o.width){t=o.width;if(parseInt(t,10)===t)t=t+"px";o.container.css({width:t})}if(i.params.rotateEffect){if(!o.width){o.items.each(function(){var i=e(this);i.css({width:"auto"});t=Math.max(t,i[0].offsetWidth);i.css({width:""})});o.container.css({width:t+2+"px"})}o.container.addClass("picker-items-col-absolute")}};o.calcSize();o.wrapper.transform("translate3d(0,"+d+"px,0)").transition(0);var m=0;var v;o.setValue=function(t,n,r){if(typeof n==="undefined")n="";var a=o.wrapper.find('.picker-item[data-picker-value="'+t+'"]').index();if(typeof a==="undefined"||a===-1){return}var s=-a*f+d;o.wrapper.transition(n);o.wrapper.transform("translate3d(0,"+s+"px,0)");if(i.params.updateValuesOnMomentum&&o.activeIndex&&o.activeIndex!==a){e.cancelAnimationFrame(v);o.wrapper.transitionEnd(function(){e.cancelAnimationFrame(v)});g()}o.updateItems(a,s,n,r)};o.updateItems=function(t,n,r,s){if(typeof n==="undefined"){n=e.getTranslate(o.wrapper[0],"y")}if(typeof t==="undefined")t=-Math.round((n-d)/f);if(t<0)t=0;if(t>=o.items.length)t=o.items.length-1;var l=o.activeIndex;o.activeIndex=t;o.wrapper.find(".picker-selected").removeClass("picker-selected");if(i.params.rotateEffect){o.items.transition(r)}var c=o.items.eq(t).addClass("picker-selected").transform("");if(s||typeof s==="undefined"){o.value=c.attr("data-picker-value");o.displayValue=o.displayValues?o.displayValues[t]:o.value;if(l!==t){if(o.onChange){o.onChange(i,o.value,o.displayValue)}i.updateValue()}}if(!i.params.rotateEffect){return}var h=(n-(Math.floor((n-d)/f)*f+d))/f;o.items.each(function(){var t=e(this);var i=t.index()*f;var r=d-n;var s=i-r;var l=s/f;var c=Math.ceil(o.height/f/2)+1;var h=-18*l;if(h>180)h=180;if(h<-180)h=-180;if(Math.abs(l)>c)t.addClass("picker-item-far");else t.removeClass("picker-item-far");t.transform("translate3d(0, "+(-n+d)+"px, "+(a?-110:0)+"px) rotateX("+h+"deg)")})};function g(){v=e.requestAnimationFrame(function(){o.updateItems(undefined,undefined,0);g()})}if(n)o.updateItems(0,d,0);var y=true;var w,x,T,C,b,k,S,E,M,P,D,_;function Y(t){if(x||w)return;t.preventDefault();w=true;T=C=t.type==="touchstart"?t.targetTouches[0].pageY:t.pageY;b=(new Date).getTime();y=true;S=M=e.getTranslate(o.wrapper[0],"y")}function H(t){if(!w)return;t.preventDefault();y=false;C=t.type==="touchmove"?t.targetTouches[0].pageY:t.pageY;if(!x){e.cancelAnimationFrame(v);x=true;S=M=e.getTranslate(o.wrapper[0],"y");o.wrapper.transition(0)}t.preventDefault();var n=C-T;M=S+n;E=undefined;if(M<p){M=p-Math.pow(p-M,.8);E="min"}if(M>d){M=d+Math.pow(M-d,.8);E="max"}o.wrapper.transform("translate3d(0,"+M+"px,0)");o.updateItems(undefined,M,0,i.params.updateValuesOnTouchmove);D=M-P||M;_=(new Date).getTime();P=M}function X(t){if(!w||!x){w=x=false;return}w=x=false;o.wrapper.transition("");if(E){if(E==="min"){o.wrapper.transform("translate3d(0,"+p+"px,0)")}else o.wrapper.transform("translate3d(0,"+d+"px,0)")}k=(new Date).getTime();var n,r;if(k-b>300){r=M}else{n=Math.abs(D/(k-_));r=M+D*i.params.momentumRatio}r=Math.max(Math.min(r,d),p);var a=-Math.floor((r-d)/f);if(!i.params.freeMode)r=-a*f+d;o.wrapper.transform("translate3d(0,"+parseInt(r,10)+"px,0)");o.updateItems(a,r,"",true);if(i.params.updateValuesOnMomentum){g();o.wrapper.transitionEnd(function(){e.cancelAnimationFrame(v)})}setTimeout(function(){y=true},100)}function I(t){if(!y)return;e.cancelAnimationFrame(v);var i=e(this).attr("data-picker-value");o.setValue(i)}o.initEvents=function(t){var i=t?"off":"on";o.container[i](e.touchEvents.start,Y);o.container[i](e.touchEvents.move,H);o.container[i](e.touchEvents.end,X);o.items[i]("click",I)};o.destroyEvents=function(){o.initEvents(true)};o.container[0].f7DestroyPickerCol=function(){o.destroyEvents()};o.initEvents()};i.destroyPickerCol=function(t){t=e(t);if("f7DestroyPickerCol"in t[0])t[0].f7DestroyPickerCol()};function s(){if(!i.opened)return;for(var e=0;e<i.cols.length;e++){if(!i.cols[e].divider){i.cols[e].calcSize();i.cols[e].setValue(i.cols[e].value,0,false)}}}e(window).on("resize",s);i.columnHTML=function(e,t){var i="";var n="";if(e.divider){n+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>"}else{for(var r=0;r<e.values.length;r++){i+='<div class="picker-item" data-picker-value="'+e.values[r]+'">'+(e.displayValues?e.displayValues[r]:e.values[r])+"</div>"}n+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+i+"</div></div>"}return t?i:n};i.layout=function(){var e="";var t="";var n;i.cols=[];var r="";for(n=0;n<i.params.cols.length;n++){var a=i.params.cols[n];r+=i.columnHTML(i.params.cols[n]);i.cols.push(a)}t="picker-modal picker-columns "+(i.params.cssClass||"")+(i.params.rotateEffect?" picker-3d":"");e='<div class="'+t+'">'+(i.params.toolbar?i.params.toolbarTemplate.replace(/{{closeText}}/g,i.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+r+'<div class="picker-center-highlight"></div>'+"</div>"+"</div>";i.pickerHTML=e};function o(t){t.preventDefault();if(e.device.isWeixin&&e.device.android&&i.params.inputReadOnly){this.focus();this.blur()}if(i.opened)return;i.open();if(i.params.scrollToInput){var n=i.input.parents(".content");if(n.length===0)return;var r=parseInt(n.css("padding-top"),10),a=parseInt(n.css("padding-bottom"),10),s=n[0].offsetHeight-r-i.container.height(),o=n[0].scrollHeight-r-i.container.height(),l;var c=i.input.offset().top-r+i.input[0].offsetHeight;if(c>s){var h=n.scrollTop()+c-s;if(h+s>o){l=h+s-o+a;if(s===o){l=i.container.height()}n.css({"padding-bottom":l+"px"})}n.scrollTop(h,300)}}}function l(t){if(!i.opened)return;if(i.input&&i.input.length>0){if(t.target!==i.input[0]&&e(t.target).parents(".picker-modal").length===0)i.close()}else{if(e(t.target).parents(".picker-modal").length===0)i.close()}}if(i.params.input){i.input=e(i.params.input);if(i.input.length>0){if(i.params.inputReadOnly)i.input.prop("readOnly",true);if(!i.inline){i.input.on("click",o)}}}if(!i.inline)e("html").on("click",l);function c(){i.opened=false;if(i.input&&i.input.length>0)i.input.parents(".content").css({"padding-bottom":""});if(i.params.onClose)i.params.onClose(i);i.container.find(".picker-items-col").each(function(){i.destroyPickerCol(this)})}i.opened=false;i.open=function(){if(!i.opened){i.layout();if(i.inline){i.container=e(i.pickerHTML);i.container.addClass("picker-modal-inline");e(i.params.container).append(i.container);i.opened=true}else{i.container=e(e.pickerModal(i.pickerHTML));e(i.container).one("opened",function(){i.opened=true}).on("close",function(){c()})}i.container[0].f7Picker=i;i.container.find(".picker-items-col").each(function(){var e=true;if(!i.initialized&&i.params.value||i.initialized&&i.value)e=false;i.initPickerCol(this,e)});if(!i.initialized){if(i.params.value){i.setValue(i.params.value,0)}}else{if(i.value)i.setValue(i.value,0)}}i.initialized=true;if(i.params.onOpen)i.params.onOpen(i)};i.close=function(){if(!i.opened||i.inline)return;e.closeModal(i.container);return};i.destroy=function(){i.close();if(i.params.input&&i.input.length>0){i.input.off("click",o)}e("html").off("click",l);e(window).off("resize",s)};if(i.inline){i.open()}return i};e(document).on("click",".close-picker",function(){var t=e(".picker-modal.modal-in");e.closeModal(t)});e.fn.picker=function(i){var n=arguments;return this.each(function(){if(!this)return;var r=e(this);var a=r.data("picker");if(!a){var s=e.extend({input:this,value:r.val()?r.val().split(" "):""},i);a=new t(s);r.data("picker",a)}if(typeof i===typeof"a"){a[i].apply(a,Array.prototype.slice.call(n,1))}})}}(Zepto);+function(e){"use strict";var t=new Date;var i=function(e){var t=[];for(var i=1;i<=(e||31);i++){t.push(i<10?"0"+i:i)}return t};var n=function(e,t){var n=new Date(t,parseInt(e)+1-1,1);var r=new Date(n-1);return i(r.getDate())};var r=function(e){return e<10?"0"+e:e};var a="01 02 03 04 05 06 07 08 09 10 11 12".split(" ");var s=function(){var e=[];for(var t=1950;t<=2030;t++){e.push(t)}return e}();var o={rotateEffect:false,value:[t.getFullYear(),r(t.getMonth()+1),r(t.getDate()),t.getHours(),r(t.getMinutes())],onChange:function(e,t,i){var r=n(e.cols[1].value,e.cols[0].value);var a=e.cols[2].value;if(a>r.length)a=r.length;e.cols[2].setValue(a)},formatValue:function(e,t,i){return i[0]+"-"+t[1]+"-"+t[2]+" "+t[3]+":"+t[4]},cols:[{values:s},{values:a},{values:i()},{divider:true,content:"  "},{values:function(){var e=[];for(var t=0;t<=23;t++){e.push(t)}return e}()},{divider:true,content:":"},{values:function(){var e=[];for(var t=0;t<=59;t++){e.push(t<10?"0"+t:t)}return e}()}]};e.fn.datetimePicker=function(t){return this.each(function(){if(!this)return;var i=e.extend(o,t);e(this).picker(i);if(t.value)e(this).val(i.formatValue(i,i.value,i.value))})}}(Zepto);+function(e){"use strict";var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)};var i=function(){var i={};var n=document.createElement("div").style;var r=function(){var e=["t","webkitT","MozT","msT","OT"],t,i=0,r=e.length;for(;i<r;i++){t=e[i]+"ransform";if(t in n)return e[i].substr(0,e[i].length-1)}return false}();function a(e){if(r===false)return false;if(r==="")return e;return r+e.charAt(0).toUpperCase()+e.substr(1)}i.getTime=Date.now||function e(){return(new Date).getTime()};i.extend=function(e,t){for(var i in t){e[i]=t[i]}};i.addEvent=function(e,t,i,n){e.addEventListener(t,i,!!n)};i.removeEvent=function(e,t,i,n){e.removeEventListener(t,i,!!n)};i.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t};i.momentum=function(e,i,n,r,a,s,o){var l=e-i,c=Math.abs(l)/n,h,f;c=c/2;c=c>1.5?1.5:c;s=s===undefined?6e-4:s;h=e+c*c/(2*s)*(l<0?-1:1);f=c/s;if(h<r){h=a?r-a/2.5*(c/8):r;l=Math.abs(h-e);f=l/c}else if(h>0){h=a?a/2.5*(c/8):0;l=Math.abs(e)+h;f=l/c}var u=+new Date;var p=u;function d(){if(+new Date-p>50){o._execEvent("scroll");p=+new Date}if(+new Date-u<f){t(d)}}t(d);return{destination:Math.round(h),duration:f}};var s=a("transform");i.extend(i,{hasTransform:s!==false,hasPerspective:a("perspective")in n,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:a("transition")in n});i.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion)&&false;i.extend(i.style={},{transform:s,transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration"),transitionDelay:a("transitionDelay"),transformOrigin:a("transformOrigin")});i.hasClass=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(e.className)};i.addClass=function(e,t){if(i.hasClass(e,t)){return}var n=e.className.split(" ");n.push(t);e.className=n.join(" ")};i.removeClass=function(e,t){if(!i.hasClass(e,t)){return}var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(n," ")};i.offset=function(e){var t=-e.offsetLeft,i=-e.offsetTop;while(e=e.offsetParent){t-=e.offsetLeft;i-=e.offsetTop}return{left:t,top:i}};i.preventDefaultException=function(e,t){for(var i in t){if(t[i].test(e[i])){return true}}return false};i.extend(i.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});i.extend(i.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return Math.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e=e-1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){if((e/=1)<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}}},elastic:{style:"",fn:function(e){var t=.22,i=.4;if(e===0){return 0}if(e===1){return 1}return i*Math.pow(2,-10*e)*Math.sin((e-t/4)*(2*Math.PI)/t)+1}}});i.tap=function(e,t){var i=document.createEvent("Event");i.initEvent(t,true,true);i.pageX=e.pageX;i.pageY=e.pageY;e.target.dispatchEvent(i)};i.click=function(e){var t=e.target,i;if(!/(SELECT|INPUT|TEXTAREA)/i.test(t.tagName)){i=document.createEvent("MouseEvents");i.initMouseEvent("click",true,true,e.view,1,t.screenX,t.screenY,t.clientX,t.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);i._constructed=true;t.dispatchEvent(i)}};return i}();function n(e,t){this.wrapper=typeof e==="string"?document.querySelector(e):e;this.scroller=$(this.wrapper).find(".content-inner")[0];this.scrollerStyle=this.scroller&&this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true,eventPassthrough:undefined};for(var n in t){this.options[n]=t[n]}this.translateZ=this.options.HWCompositing&&i.hasPerspective?" translateZ(0)":"";this.options.useTransition=i.hasTransition&&this.options.useTransition;this.options.useTransform=i.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough==="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough==="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing==="string"?i.ease[this.options.bounceEasing]||i.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(this.options.shrinkScrollbars==="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;if(this.options.probeType===3){this.options.useTransition=false}this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}n.prototype={version:"5.1.3",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(e){if(e.target!==this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(e){if(i.eventType[e.type]!==1){if(e.button!==0){return}}if(!this.enabled||this.initiated&&i.eventType[e.type]!==this.initiated){return}if(this.options.preventDefault&&!i.isBadAndroid&&!i.preventDefaultException(e.target,this.options.preventDefaultException)){e.preventDefault()}var t=e.touches?e.touches[0]:e,n;this.initiated=i.eventType[e.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=i.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;n=this.getComputedPosition();this._translate(Math.round(n.x),Math.round(n.y));this._execEvent("scrollEnd")}else if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=t.pageX;this.pointY=t.pageY;this._execEvent("beforeScrollStart")},_move:function(e){if(!this.enabled||i.eventType[e.type]!==this.initiated){return}if(this.options.preventDefault){e.preventDefault()}var t=e.touches?e.touches[0]:e,n=t.pageX-this.pointX,r=t.pageY-this.pointY,a=i.getTime(),s,o,l,c;this.pointX=t.pageX;this.pointY=t.pageY;this.distX+=n;this.distY+=r;l=Math.abs(this.distX);c=Math.abs(this.distY);if(a-this.endTime>300&&(l<10&&c<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(l>c+this.options.directionLockThreshold){this.directionLocked="h"}else if(c>=l+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}if(this.directionLocked==="h"){if(this.options.eventPassthrough==="vertical"){e.preventDefault()}else if(this.options.eventPassthrough==="horizontal"){this.initiated=false;return}r=0}else if(this.directionLocked==="v"){if(this.options.eventPassthrough==="horizontal"){e.preventDefault()}else if(this.options.eventPassthrough==="vertical"){this.initiated=false;return}n=0}n=this.hasHorizontalScroll?n:0;r=this.hasVerticalScroll?r:0;s=this.x+n;o=this.y+r;if(s>0||s<this.maxScrollX){s=this.options.bounce?this.x+n/3:s>0?0:this.maxScrollX}if(o>0||o<this.maxScrollY){o=this.options.bounce?this.y+r/3:o>0?0:this.maxScrollY}this.directionX=n>0?-1:n<0?1:0;this.directionY=r>0?-1:r<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(s,o);if(a-this.startTime>300){this.startTime=a;this.startX=this.x;this.startY=this.y;if(this.options.probeType===1){this._execEvent("scroll")}}if(this.options.probeType>1){this._execEvent("scroll")}},_end:function(e){if(!this.enabled||i.eventType[e.type]!==this.initiated){return}if(this.options.preventDefault&&!i.preventDefaultException(e.target,this.options.preventDefaultException)){e.preventDefault()}var t,n,r=i.getTime()-this.startTime,a=Math.round(this.x),s=Math.round(this.y),o=Math.abs(a-this.startX),l=Math.abs(s-this.startY),c=0,h="";this.isInTransition=0;this.initiated=0;this.endTime=i.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(a,s);if(!this.moved){if(this.options.tap){i.tap(e,this.options.tap)}if(this.options.click){i.click(e)}this._execEvent("scrollCancel");return}if(this._events.flick&&r<200&&o<100&&l<100){this._execEvent("flick");return}if(this.options.momentum&&r<300){t=this.hasHorizontalScroll?i.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration,this):{destination:a,duration:0};n=this.hasVerticalScroll?i.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration,this):{destination:s,duration:0};a=t.destination;s=n.destination;c=Math.max(t.duration,n.duration);this.isInTransition=1}if(this.options.snap){var f=this._nearestSnap(a,s);this.currentPage=f;c=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(a-f.x),1e3),Math.min(Math.abs(s-f.y),1e3)),300);a=f.x;s=f.y;this.directionX=0;this.directionY=0;h=this.options.bounceEasing}if(a!==this.x||s!==this.y){if(a>0||a<this.maxScrollX||s>0||s<this.maxScrollY){h=i.ease.quadratic}this.scrollTo(a,s,c,h);return}this._execEvent("scrollEnd")},_resize:function(){var e=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(t){var i=this.x,n=this.y;t=t||0;if(!this.hasHorizontalScroll||this.x>0){i=0}else if(this.x<this.maxScrollX){i=this.maxScrollX}if(!this.hasVerticalScroll||this.y>0){n=0}else if(this.y<this.maxScrollY){n=this.maxScrollY}if(i===this.x&&n===this.y){return false}if(this.options.ptr&&this.y>44&&this.startY*-1<$(e).height()&&!this.ptrLock){n=this.options.ptrOffset||44;this._execEvent("ptr");this.ptrLock=true;var r=this;setTimeout(function(){r.ptrLock=false},500)}this.scrollTo(i,n,t,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=i.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(e,t){if(!this._events[e]){this._events[e]=[]}this._events[e].push(t)},off:function(e,t){if(!this._events[e]){return}var i=this._events[e].indexOf(t);if(i>-1){this._events[e].splice(i,1)}},_execEvent:function(e){if(!this._events[e]){return}var t=0,i=this._events[e].length;if(!i){return}for(;t<i;t++){this._events[e][t].apply(this,[].slice.call(arguments,1));
}},scrollBy:function(e,t,i,n){e=this.x+e;t=this.y+t;i=i||0;this.scrollTo(e,t,i,n)},scrollTo:function(e,t,n,r){r=r||i.ease.circular;this.isInTransition=this.options.useTransition&&n>0;if(!n||this.options.useTransition&&r.style){this._transitionTimingFunction(r.style);this._transitionTime(n);this._translate(e,t)}else{this._animate(e,t,n,r.fn)}},scrollToElement:function(e,t,n,r,a){e=e.nodeType?e:this.scroller.querySelector(e);if(!e){return}var s=i.offset(e);s.left-=this.wrapperOffset.left;s.top-=this.wrapperOffset.top;if(n===true){n=Math.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)}if(r===true){r=Math.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)}s.left-=n||0;s.top-=r||0;s.left=s.left>0?0:s.left<this.maxScrollX?this.maxScrollX:s.left;s.top=s.top>0?0:s.top<this.maxScrollY?this.maxScrollY:s.top;t=t===undefined||t===null||t==="auto"?Math.max(Math.abs(this.x-s.left),Math.abs(this.y-s.top)):t;this.scrollTo(s.left,s.top,t,a)},_transitionTime:function(e){e=e||0;this.scrollerStyle[i.style.transitionDuration]=e+"ms";if(!e&&i.isBadAndroid){this.scrollerStyle[i.style.transitionDuration]="0.001s"}if(this.indicators){for(var t=this.indicators.length;t--;){this.indicators[t].transitionTime(e)}}},_transitionTimingFunction:function(e){this.scrollerStyle[i.style.transitionTimingFunction]=e;if(this.indicators){for(var t=this.indicators.length;t--;){this.indicators[t].transitionTimingFunction(e)}}},_translate:function(e,t){if(this.options.useTransform){this.scrollerStyle[i.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ}else{e=Math.round(e);t=Math.round(t);this.scrollerStyle.left=e+"px";this.scrollerStyle.top=t+"px"}this.x=e;this.y=t;if(this.indicators){for(var n=this.indicators.length;n--;){this.indicators[n].updatePosition()}}},_initEvents:function(t){var n=t?i.removeEvent:i.addEvent,r=this.options.bindToWrapper?this.wrapper:e;n(e,"orientationchange",this);n(e,"resize",this);if(this.options.click){n(this.wrapper,"click",this,true)}if(!this.options.disableMouse){n(this.wrapper,"mousedown",this);n(r,"mousemove",this);n(r,"mousecancel",this);n(r,"mouseup",this)}if(i.hasPointer&&!this.options.disablePointer){n(this.wrapper,i.prefixPointerEvent("pointerdown"),this);n(r,i.prefixPointerEvent("pointermove"),this);n(r,i.prefixPointerEvent("pointercancel"),this);n(r,i.prefixPointerEvent("pointerup"),this)}if(i.hasTouch&&!this.options.disableTouch){n(this.wrapper,"touchstart",this);n(r,"touchmove",this);n(r,"touchcancel",this);n(r,"touchend",this)}n(this.scroller,"transitionend",this);n(this.scroller,"webkitTransitionEnd",this);n(this.scroller,"oTransitionEnd",this);n(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t=e.getComputedStyle(this.scroller,null),n,r;if(this.options.useTransform){t=t[i.style.transform].split(")")[0].split(", ");n=+(t[12]||t[4]);r=+(t[13]||t[5])}else{n=+t.left.replace(/[^-\d.]/g,"");r=+t.top.replace(/[^-\d.]/g,"")}return{x:n,y:r}},_initIndicators:function(){var e=this.options.interactiveScrollbars,t=typeof this.options.scrollbars!=="string",i=[],n;var s=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){n={el:r("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:true,customStyle:t,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(n.el);i.push(n)}if(this.options.scrollX){n={el:r("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:true,customStyle:t,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(n.el);i.push(n)}}if(this.options.indicators){i=i.concat(this.options.indicators)}for(var o=i.length;o--;){this.indicators.push(new a(this,i[o]))}function l(e){for(var t=s.indicators.length;t--;){e.call(s.indicators[t])}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){l(function(){this.fade()})});this.on("scrollCancel",function(){l(function(){this.fade()})});this.on("scrollStart",function(){l(function(){this.fade(1)})});this.on("beforeScrollStart",function(){l(function(){this.fade(1,true)})})}this.on("refresh",function(){l(function(){this.refresh()})});this.on("destroy",function(){l(function(){this.destroy()});delete this.indicators})},_initWheel:function(){i.addEvent(this.wrapper,"wheel",this);i.addEvent(this.wrapper,"mousewheel",this);i.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){i.removeEvent(this.wrapper,"wheel",this);i.removeEvent(this.wrapper,"mousewheel",this);i.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(!this.enabled){return}e.preventDefault();e.stopPropagation();var t,i,n,r,a=this;if(this.wheelTimeout===undefined){a._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){a._execEvent("scrollEnd");a.wheelTimeout=undefined},400);if("deltaX"in e){if(e.deltaMode===1){t=-e.deltaX*this.options.mouseWheelSpeed;i=-e.deltaY*this.options.mouseWheelSpeed}else{t=-e.deltaX;i=-e.deltaY}}else if("wheelDeltaX"in e){t=e.wheelDeltaX/120*this.options.mouseWheelSpeed;i=e.wheelDeltaY/120*this.options.mouseWheelSpeed}else if("wheelDelta"in e){t=i=e.wheelDelta/120*this.options.mouseWheelSpeed}else if("detail"in e){t=i=-e.detail/3*this.options.mouseWheelSpeed}else{return}t*=this.options.invertWheelDirection;i*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){t=i;i=0}if(this.options.snap){n=this.currentPage.pageX;r=this.currentPage.pageY;if(t>0){n--}else if(t<0){n++}if(i>0){r--}else if(i<0){r++}this.goToPage(n,r);return}n=this.x+Math.round(this.hasHorizontalScroll?t:0);r=this.y+Math.round(this.hasVerticalScroll?i:0);if(n>0){n=0}else if(n<this.maxScrollX){n=this.maxScrollX}if(r>0){r=0}else if(r<this.maxScrollY){r=this.maxScrollY}this.scrollTo(n,r,0);this._execEvent("scroll")},_initSnap:function(){this.currentPage={};if(typeof this.options.snap==="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var e=0,t,i=0,n,r,a,s=0,o,l=this.options.snapStepX||this.wrapperWidth,c=this.options.snapStepY||this.wrapperHeight,h;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){r=Math.round(l/2);a=Math.round(c/2);while(s>-this.scrollerWidth){this.pages[e]=[];t=0;o=0;while(o>-this.scrollerHeight){this.pages[e][t]={x:Math.max(s,this.maxScrollX),y:Math.max(o,this.maxScrollY),width:l,height:c,cx:s-r,cy:o-a};o-=c;t++}s-=l;e++}}else{h=this.options.snap;t=h.length;n=-1;for(;e<t;e++){if(e===0||h[e].offsetLeft<=h[e-1].offsetLeft){i=0;n++}if(!this.pages[i]){this.pages[i]=[]}s=Math.max(-h[e].offsetLeft,this.maxScrollX);o=Math.max(-h[e].offsetTop,this.maxScrollY);r=s-Math.round(h[e].offsetWidth/2);a=o-Math.round(h[e].offsetHeight/2);this.pages[i][n]={x:s,y:o,width:h[e].offsetWidth,height:h[e].offsetHeight,cx:r,cy:a};if(s>this.maxScrollX){i++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var e=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.x-this.startX),1e3),Math.min(Math.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var i=0,n=this.pages.length,r=0;if(Math.abs(e-this.absStartX)<this.snapThresholdX&&Math.abs(t-this.absStartY)<this.snapThresholdY){return this.currentPage}if(e>0){e=0}else if(e<this.maxScrollX){e=this.maxScrollX}if(t>0){t=0}else if(t<this.maxScrollY){t=this.maxScrollY}for(;i<n;i++){if(e>=this.pages[i][0].cx){e=this.pages[i][0].x;break}}n=this.pages[i].length;for(;r<n;r++){if(t>=this.pages[0][r].cy){t=this.pages[0][r].y;break}}if(i===this.currentPage.pageX){i+=this.directionX;if(i<0){i=0}else if(i>=this.pages.length){i=this.pages.length-1}e=this.pages[i][0].x}if(r===this.currentPage.pageY){r+=this.directionY;if(r<0){r=0}else if(r>=this.pages[0].length){r=this.pages[0].length-1}t=this.pages[0][r].y}return{x:e,y:t,pageX:i,pageY:r}},goToPage:function(e,t,i,n){n=n||this.options.bounceEasing;if(e>=this.pages.length){e=this.pages.length-1}else if(e<0){e=0}if(t>=this.pages[e].length){t=this.pages[e].length-1}else if(t<0){t=0}var r=this.pages[e][t].x,a=this.pages[e][t].y;i=i===undefined?this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(r-this.x),1e3),Math.min(Math.abs(a-this.y),1e3)),300):i;this.currentPage={x:r,y:a,pageX:e,pageY:t};this.scrollTo(r,a,i,n)},next:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++;if(i>=this.pages.length&&this.hasVerticalScroll){i=0;n++}this.goToPage(i,n,e,t)},prev:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--;if(i<0&&this.hasVerticalScroll){i=0;n--}this.goToPage(i,n,e,t)},_initKeys:function(){var t={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var n;if(typeof this.options.keyBindings==="object"){for(n in this.options.keyBindings){if(typeof this.options.keyBindings[n]==="string"){this.options.keyBindings[n]=this.options.keyBindings[n].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(n in t){this.options.keyBindings[n]=this.options.keyBindings[n]||t[n]}i.addEvent(e,"keydown",this);this.on("destroy",function(){i.removeEvent(e,"keydown",this)})},_key:function(e){if(!this.enabled){return}var t=this.options.snap,n=t?this.currentPage.pageX:this.x,r=t?this.currentPage.pageY:this.y,a=i.getTime(),s=this.keyTime||0,o=.25,l;if(this.options.useTransition&&this.isInTransition){l=this.getComputedPosition();this._translate(Math.round(l.x),Math.round(l.y));this.isInTransition=false}this.keyAcceleration=a-s<200?Math.min(this.keyAcceleration+o,50):0;switch(e.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){n+=t?1:this.wrapperWidth}else{r+=t?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){n-=t?1:this.wrapperWidth}else{r-=t?1:this.wrapperHeight}break;case this.options.keyBindings.end:n=t?this.pages.length-1:this.maxScrollX;r=t?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:n=0;r=0;break;case this.options.keyBindings.left:n+=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:r+=t?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:n-=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:r-=t?1:5+this.keyAcceleration>>0;break;default:return}if(t){this.goToPage(n,r);return}if(n>0){n=0;this.keyAcceleration=0}else if(n<this.maxScrollX){n=this.maxScrollX;this.keyAcceleration=0}if(r>0){r=0;this.keyAcceleration=0}else if(r<this.maxScrollY){r=this.maxScrollY;this.keyAcceleration=0}this.scrollTo(n,r,0);this.keyTime=a},_animate:function(e,n,r,a){var s=this,o=this.x,l=this.y,c=i.getTime(),h=c+r;function f(){var u=i.getTime(),p,d,m;if(u>=h){s.isAnimating=false;s._translate(e,n);if(!s.resetPosition(s.options.bounceTime)){s._execEvent("scrollEnd")}return}u=(u-c)/r;m=a(u);p=(e-o)*m+o;d=(n-l)*m+l;s._translate(p,d);if(s.isAnimating){t(f)}if(s.options.probeType===3){s._execEvent("scroll")}}this.isAnimating=true;f()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":if(!e._constructed){e.preventDefault();e.stopPropagation()}break}}};function r(e,t,i){var n=document.createElement("div"),r=document.createElement("div");if(i===true){n.style.cssText="position:absolute;z-index:9999";r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"}r.className="iScrollIndicator";if(e==="h"){if(i===true){n.style.cssText+=";height:5px;left:2px;right:2px;bottom:0";r.style.height="100%"}n.className="iScrollHorizontalScrollbar"}else{if(i===true){n.style.cssText+=";width:5px;bottom:2px;top:2px;right:1px";r.style.width="100%"}n.className="iScrollVerticalScrollbar"}n.style.cssText+=";overflow:hidden";if(!t){n.style.pointerEvents="none"}n.appendChild(r);return n}function a(t,n){this.wrapper=typeof n.el==="string"?document.querySelector(n.el):n.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=t;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var r in n){this.options[r]=n[r]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){i.addEvent(this.indicator,"touchstart",this);i.addEvent(e,"touchend",this)}if(!this.options.disablePointer){i.addEvent(this.indicator,i.prefixPointerEvent("pointerdown"),this);i.addEvent(e,i.prefixPointerEvent("pointerup"),this)}if(!this.options.disableMouse){i.addEvent(this.indicator,"mousedown",this);i.addEvent(e,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[i.style.transform]=this.scroller.translateZ;this.wrapperStyle[i.style.transitionDuration]=i.isBadAndroid?"0.001s":"0ms";this.wrapperStyle.opacity="0"}}a.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break}},destroy:function(){if(this.options.interactive){i.removeEvent(this.indicator,"touchstart",this);i.removeEvent(this.indicator,i.prefixPointerEvent("pointerdown"),this);i.removeEvent(this.indicator,"mousedown",this);i.removeEvent(e,"touchmove",this);i.removeEvent(e,i.prefixPointerEvent("pointermove"),this);i.removeEvent(e,"mousemove",this);i.removeEvent(e,"touchend",this);i.removeEvent(e,i.prefixPointerEvent("pointerup"),this);i.removeEvent(e,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(t){var n=t.touches?t.touches[0]:t;t.preventDefault();t.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=n.pageX;this.lastPointY=n.pageY;this.startTime=i.getTime();if(!this.options.disableTouch){i.addEvent(e,"touchmove",this)}if(!this.options.disablePointer){i.addEvent(e,i.prefixPointerEvent("pointermove"),this)}if(!this.options.disableMouse){i.addEvent(e,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t=e.touches?e.touches[0]:e,n,r,a,s,o=i.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;n=t.pageX-this.lastPointX;this.lastPointX=t.pageX;r=t.pageY-this.lastPointY;this.lastPointY=t.pageY;a=this.x+n;s=this.y+r;this._pos(a,s);if(this.scroller.options.probeType===1&&o-this.startTime>300){this.startTime=o;this.scroller._execEvent("scroll")}else if(this.scroller.options.probeType>1){this.scroller._execEvent("scroll")}e.preventDefault();e.stopPropagation()},_end:function(t){if(!this.initiated){return}this.initiated=false;t.preventDefault();t.stopPropagation();i.removeEvent(e,"touchmove",this);i.removeEvent(e,i.prefixPointerEvent("pointermove"),this);i.removeEvent(e,"mousemove",this);if(this.scroller.options.snap){var n=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var r=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.scroller.x-n.x),1e3),Math.min(Math.abs(this.scroller.y-n.y),1e3)),300);if(this.scroller.x!==n.x||this.scroller.y!==n.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=n;this.scroller.scrollTo(n.x,n.y,r,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0;this.indicatorStyle[i.style.transitionDuration]=e+"ms";if(!e&&i.isBadAndroid){this.indicatorStyle[i.style.transitionDuration]="0.001s"}},transitionTimingFunction:function(e){this.indicatorStyle[i.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){i.addClass(this.wrapper,"iScrollBothScrollbars");i.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{i.removeClass(this.wrapper,"iScrollBothScrollbars");i.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=Math.max(Math.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink==="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=Math.max(Math.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink==="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY}this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&Math.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&Math.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(e<this.minBoundaryX){if(this.options.shrink==="scale"){this.width=Math.max(this.indicatorWidth+e,8);this.indicatorStyle.width=this.width+"px"}e=this.minBoundaryX}else if(e>this.maxBoundaryX){if(this.options.shrink==="scale"){this.width=Math.max(this.indicatorWidth-(e-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";e=this.maxPosX+this.indicatorWidth-this.width}else{e=this.maxBoundaryX}}else if(this.options.shrink==="scale"&&this.width!==this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}if(t<this.minBoundaryY){if(this.options.shrink==="scale"){this.height=Math.max(this.indicatorHeight+t*3,8);this.indicatorStyle.height=this.height+"px"}t=this.minBoundaryY}else if(t>this.maxBoundaryY){if(this.options.shrink==="scale"){this.height=Math.max(this.indicatorHeight-(t-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";t=this.maxPosY+this.indicatorHeight-this.height}else{t=this.maxBoundaryY}}else if(this.options.shrink==="scale"&&this.height!==this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}this.x=e;this.y=t;if(this.scroller.options.useTransform){this.indicatorStyle[i.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=e+"px";this.indicatorStyle.top=t+"px"}},_pos:function(e,t){if(e<0){e=0}else if(e>this.maxPosX){e=this.maxPosX}if(t<0){t=0}else if(t>this.maxPosY){t=this.maxPosY}e=this.options.listenX?Math.round(e/this.sizeRatioX):this.scroller.x;t=this.options.listenY?Math.round(t/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(e,t)},fade:function(e,t){if(t&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var n=e?250:500,r=e?0:300;e=e?"1":"0";this.wrapperStyle[i.style.transitionDuration]=n+"ms";this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e;this.visible=+e}.bind(this,e),r)}};n.utils=i;e.IScroll=n}(window);+function(e){"use strict";var t={scrollTop:e.fn.scrollTop,scrollLeft:e.fn.scrollLeft};(function(){e.extend(e.fn,{scrollTop:function(e,i){if(!this.length)return;var n=this.data("scroller");if(n&&n.scroller){return n.scrollTop(e,i)}else{return t.scrollTop.apply(this,arguments)}}});e.extend(e.fn,{scrollLeft:function(e,i){if(!this.length)return;var n=this.data("scroller");if(n&&n.scroller){return n.scrollLeft(e,i)}else{return t.scrollLeft.apply(this,arguments)}}})})();var i=function(t,i){var n=this.$pageContent=e(t);this.options=e.extend({},this._defaults,i);var r=this.options.type;var a=r==="js"||(r==="auto"&&(e.device.android&&e.compareVersion("4.4.0",e.device.osVersion)>-1)||r==="auto"&&(e.device.ios&&e.compareVersion("6.0.0",e.device.osVersion)>-1));if(a){var s=n.find(".content-inner");if(!s[0]){var o=n.children();if(o.length<1){n.children().wrapAll('<div class="content-inner"></div>')}else{n.html('<div class="content-inner">'+n.html()+"</div>")}}if(n.hasClass("pull-to-refresh-content")){var l=e(window).height()+(n.prev().hasClass(".bar")?1:61);n.find(".content-inner").css("min-height",l+"px")}var c=e(t).hasClass("pull-to-refresh-content");var h=n.find(".fixed-tab").length===0;var f={probeType:1,mouseWheel:true,click:e.device.androidChrome,useTransform:h,scrollX:true};if(c){f.ptr=true;f.ptrOffset=44}this.scroller=new IScroll(t,f);this._bindEventToDomWhenJs();e.initPullToRefresh=e._pullToRefreshJSScroll.initPullToRefresh;e.pullToRefreshDone=e._pullToRefreshJSScroll.pullToRefreshDone;e.pullToRefreshTrigger=e._pullToRefreshJSScroll.pullToRefreshTrigger;e.destroyToRefresh=e._pullToRefreshJSScroll.destroyToRefresh;n.addClass("javascript-scroll");if(!h){n.find(".content-inner").css({width:"100%",position:"absolute"})}var u=this.$pageContent[0].scrollTop;if(u){this.$pageContent[0].scrollTop=0;this.scrollTop(u)}}else{n.addClass("native-scroll")}};i.prototype={_defaults:{type:"native"},_bindEventToDomWhenJs:function(){if(this.scroller){var e=this;this.scroller.on("scrollStart",function(){e.$pageContent.trigger("scrollstart")});this.scroller.on("scroll",function(){e.$pageContent.trigger("scroll")});this.scroller.on("scrollEnd",function(){e.$pageContent.trigger("scrollend")})}else{}},scrollTop:function(e,t){if(this.scroller){if(e!==undefined){this.scroller.scrollTo(0,-1*e,t)}else{return this.scroller.getComputedPosition().y*-1}}else{return this.$pageContent.scrollTop(e,t)}return this},scrollLeft:function(e,t){if(this.scroller){if(e!==undefined){this.scroller.scrollTo(-1*e,0)}else{return this.scroller.getComputedPosition().x*-1}}else{return this.$pageContent.scrollTop(e,t)}return this},on:function(e,t){if(this.scroller){this.scroller.on(e,function(){t.call(this.wrapper)})}else{this.$pageContent.on(e,t)}return this},off:function(e,t){if(this.scroller){this.scroller.off(e,t)}else{this.$pageContent.off(e,t)}return this},refresh:function(){if(this.scroller)this.scroller.refresh();return this},scrollHeight:function(){if(this.scroller){return this.scroller.scrollerHeight}else{return this.$pageContent[0].scrollHeight}}};function n(t){var n=Array.apply(null,arguments);n.shift();var r;this.each(function(){var a=e(this);var s=e.extend({},a.dataset(),typeof t==="object"&&t);var o=a.data("scroller");if(!o){a.data("scroller",o=new i(this,s))}if(typeof t==="string"&&typeof o[t]==="function"){r=o[t].apply(o,n);if(r!==undefined)return false}});if(r!==undefined)return r;else return this}var r=e.fn.scroller;e.fn.scroller=n;e.fn.scroller.Constructor=i;e.fn.scroller.noConflict=function(){e.fn.scroller=r;return this};e(function(){e('[data-toggle="scroller"]').scroller()});e.refreshScroller=function(t){if(t){e(t).scroller("refresh")}else{e(".javascript-scroll").each(function(){e(this).scroller("refresh")})}};e.initScroller=function(t){this.options=e.extend({},typeof t==="object"&&t);e('[data-toggle="scroller"],.content').scroller(t)};e.getScroller=function(t){t=t.hasClass("content")?t:t.parents(".content");if(t){return e(t).data("scroller")}else{return e(".content.javascript-scroll").data("scroller")}};e.detectScrollerType=function(t){if(t){if(e(t).data("scroller")&&e(t).data("scroller").scroller){return"js"}else{return"native"}}}}(Zepto);+function(e){"use strict";var t=function(t,i,n){var r=e(t);if(arguments.length===2){if(typeof i==="boolean"){n=i}}if(r.length===0)return false;if(r.hasClass("active")){if(n)r.trigger("show");return false}var a=r.parent(".tabs");if(a.length===0)return false;var s=a.children(".tab.active").removeClass("active");r.addClass("active");r.trigger("show");if(i)i=e(i);else{if(typeof t==="string")i=e('.tab-link[href="'+t+'"]');else i=e('.tab-link[href="#'+r.attr("id")+'"]');if(!i||i&&i.length===0){e("[data-tab]").each(function(){if(r.is(e(this).attr("data-tab")))i=e(this)})}}if(i.length===0)return;var o;if(s&&s.length>0){var l=s.attr("id");if(l)o=e('.tab-link[href="#'+l+'"]');if(!o||o&&o.length===0){e("[data-tab]").each(function(){if(s.is(e(this).attr("data-tab")))o=e(this)})}}if(i&&i.length>0)i.addClass("active");if(o&&o.length>0)o.removeClass("active");i.trigger("active");return true};var i=e.showTab;e.showTab=t;e.showTab.noConflict=function(){e.showTab=i;return this};e(document).on("click",".tab-link",function(i){i.preventDefault();var n=e(this);t(n.data("tab")||n.attr("href"),n)})}(Zepto);+function(e){"use strict";e.initFixedTab=function(){var t=e(".fixed-tab");if(t.length===0)return;e(".fixed-tab").fixedTab()};var t=function(t,i){var n=this.$pageContent=e(t);var r=n.clone();var a=n[0].getBoundingClientRect().top;r.css("visibility","hidden");this.options=e.extend({},this._defaults,{fixedTop:a,shadow:r,offset:0},i);this._bindEvents()};t.prototype={_defaults:{offset:0},_bindEvents:function(){this.$pageContent.parents(".content").on("scroll",this._scrollHandler.bind(this));this.$pageContent.on("active",".tab-link",this._tabLinkHandler.bind(this))},_tabLinkHandler:function(t){var i=e(t.target).parents(".buttons-fixed").length>0;var n=this.options.fixedTop;var r=this.options.offset;e.refreshScroller();if(!i)return;this.$pageContent.parents(".content").scrollTop(n-r)},_scrollHandler:function(t){var i=e(t.target);var n=this.$pageContent;var r=this.options.shadow;var a=this.options.offset;var s=this.options.fixedTop;var o=i.scrollTop();var l=o>=s-a;if(l&&/iP(ad|hone|od)/.test(navigator.userAgent)){n.addClass("sticky").css("top",a)}else if(l){r.insertAfter(n);n.addClass("buttons-fixed").css("top",a)}else{r.remove();n.removeClass("buttons-fixed").css("top",0)}}};function i(i){var n=Array.apply(null,arguments);n.shift();this.each(function(){var n=e(this);var r=e.extend({},n.dataset(),typeof i==="object"&&i);var a=n.data("fixedtab");if(!a){n.data("fixedtab",a=new t(this,r))}})}e.fn.fixedTab=i;e.fn.fixedTab.Constructor=t;e(document).on("pageInit",function(){e.initFixedTab()})}(Zepto);+function(e){"use strict";var t=0;var i=function(i){var n=e(i);if(!n.hasClass("pull-to-refresh-content")){n=n.find(".pull-to-refresh-content")}if(!n||n.length===0)return;var r=n.hasClass("content")?n:n.parents(".content");var a=e.getScroller(r[0]);if(!a)return;var s=n;function o(){if(s.hasClass("refreshing"))return;if(a.scrollTop()*-1>=44){s.removeClass("pull-down").addClass("pull-up")}else{s.removeClass("pull-up").addClass("pull-down")}}function l(){if(s.hasClass("refreshing"))return;s.removeClass("pull-down pull-up");s.addClass("refreshing transitioning");s.trigger("refresh");t=+new Date}a.on("scroll",o);a.scroller.on("ptr",l);function c(){a.off("scroll",o);a.scroller.off("ptr",l)}n[0].destroyPullToRefresh=c};var n=function(i){i=e(i);if(i.length===0)i=e(".pull-to-refresh-content.refreshing");if(i.length===0)return;var n=+new Date-t;var r=n>1e3?0:1e3-n;var a=e.getScroller(i);setTimeout(function(){a.refresh();i.removeClass("refreshing");i.transitionEnd(function(){i.removeClass("transitioning")})},r)};var r=function(t){t=e(t);if(t.length===0)t=e(".pull-to-refresh-content");if(t.hasClass("refreshing"))return;t.addClass("refreshing");var i=e.getScroller(t);i.scrollTop(44+1,200);t.trigger("refresh")};var a=function(t){t=e(t);var i=t.hasClass("pull-to-refresh-content")?t:t.find(".pull-to-refresh-content");if(i.length===0)return;if(i[0].destroyPullToRefresh)i[0].destroyPullToRefresh()};e._pullToRefreshJSScroll={initPullToRefresh:i,pullToRefreshDone:n,pullToRefreshTrigger:r,destroyPullToRefresh:a}}(Zepto);+function(e){"use strict";e.initPullToRefresh=function(t){var i=e(t);if(!i.hasClass("pull-to-refresh-content")){i=i.find(".pull-to-refresh-content")}if(!i||i.length===0)return;var n,r,a={},s,o,l,c,h=false,f=false,u=0,p,d,m,v,g;c=i;if(c.attr("data-ptr-distance")){g=true}else{v=44}function y(t){if(n){if(e.device.android){if("targetTouches"in t&&t.targetTouches.length>1)return}else return}r=false;n=true;s=undefined;m=undefined;a.x=t.type==="touchstart"?t.targetTouches[0].pageX:t.pageX;a.y=t.type==="touchstart"?t.targetTouches[0].pageY:t.pageY;l=(new Date).getTime();c=e(this)}function w(t){if(!n)return;var i=t.type==="touchmove"?t.targetTouches[0].pageX:t.pageX;var l=t.type==="touchmove"?t.targetTouches[0].pageY:t.pageY;if(typeof s==="undefined"){s=!!(s||Math.abs(l-a.y)>Math.abs(i-a.x))}if(!s){n=false;return}d=c[0].scrollTop;if(typeof m==="undefined"&&d!==0)m=true;if(!r){c.removeClass("transitioning");if(d>c[0].offsetHeight){n=false;return}if(g){v=c.attr("data-ptr-distance");if(v.indexOf("%")>=0)v=c[0].offsetHeight*parseInt(v,10)/100}u=c.hasClass("refreshing")?v:0;if(c[0].scrollHeight===c[0].offsetHeight||!e.device.ios){f=true}else{f=false}f=true}r=true;o=l-a.y;if(o>0&&d<=0||d<0){if(e.device.ios&&parseInt(e.device.osVersion.split(".")[0],10)>7&&d===0&&!m)f=true;if(f){t.preventDefault();p=Math.pow(o,.85)+u;c.transform("translate3d(0,"+p+"px,0)")}else{}if(f&&Math.pow(o,.85)>v||!f&&o>=v*2){h=true;c.addClass("pull-up").removeClass("pull-down")}else{h=false;c.removeClass("pull-up").addClass("pull-down")}}else{c.removeClass("pull-up pull-down");h=false;return}}function x(){if(!n||!r){n=false;r=false;return}if(p){c.addClass("transitioning");p=0}c.transform("");if(h){if(c.hasClass("refreshing"))return;c.addClass("refreshing");c.trigger("refresh")}else{c.removeClass("pull-down")}n=false;r=false}i.on(e.touchEvents.start,y);i.on(e.touchEvents.move,w);i.on(e.touchEvents.end,x);function T(){i.off(e.touchEvents.start,y);i.off(e.touchEvents.move,w);i.off(e.touchEvents.end,x)}i[0].destroyPullToRefresh=T;
};e.pullToRefreshDone=function(t){e(window).scrollTop(0);t=e(t);if(t.length===0)t=e(".pull-to-refresh-content.refreshing");t.removeClass("refreshing").addClass("transitioning");t.transitionEnd(function(){t.removeClass("transitioning pull-up pull-down")})};e.pullToRefreshTrigger=function(t){t=e(t);if(t.length===0)t=e(".pull-to-refresh-content");if(t.hasClass("refreshing"))return;t.addClass("transitioning refreshing");t.trigger("refresh")};e.destroyPullToRefresh=function(t){t=e(t);var i=t.hasClass("pull-to-refresh-content")?t:t.find(".pull-to-refresh-content");if(i.length===0)return;if(i[0].destroyPullToRefresh)i[0].destroyPullToRefresh()}}(Zepto);+function(e){"use strict";function t(){var t=e(this);var i=e.getScroller(t);var n=i.scrollTop();var r=i.scrollHeight();var a=t[0].offsetHeight;var s=t[0].getAttribute("data-distance");var o=t.find(".virtual-list");var l;var c=t.hasClass("infinite-scroll-top");if(!s)s=50;if(typeof s==="string"&&s.indexOf("%")>=0){s=parseInt(s,10)/100*a}if(s>a)s=a;if(c){if(n<s){t.trigger("infinite")}}else{if(n+a>=r-s){if(o.length>0){l=o[0].f7VirtualList;if(l&&!l.reachEnd)return}t.trigger("infinite")}}}e.attachInfiniteScroll=function(i){e.getScroller(i).on("scroll",t)};e.detachInfiniteScroll=function(i){e.getScroller(i).off("scroll",t)};e.initInfiniteScroll=function(t){t=e(t);var i=t.hasClass("infinite-scroll")?t:t.find(".infinite-scroll");if(i.length===0)return;e.attachInfiniteScroll(i);t.forEach(function(t){if(e(t).hasClass("infinite-scroll-top")){var i=t.scrollHeight-t.clientHeight;e(t).scrollTop(i)}});function n(){e.detachInfiniteScroll(i);t.off("pageBeforeRemove",n)}t.on("pageBeforeRemove",n)}}(Zepto);+function(e){"use strict";e(function(){e(document).on("focus",".searchbar input",function(t){var i=e(t.target);i.parents(".searchbar").addClass("searchbar-active")});e(document).on("click",".searchbar-cancel",function(t){var i=e(t.target);i.parents(".searchbar").removeClass("searchbar-active")});e(document).on("blur",".searchbar input",function(t){var i=e(t.target);i.parents(".searchbar").removeClass("searchbar-active")})})}(Zepto);+function(e){"use strict";e.allowPanelOpen=true;e.openPanel=function(t){if(!e.allowPanelOpen)return false;if(t==="left"||t==="right")t=".panel-"+t;t=t?e(t):e(".panel").eq(0);var i=t.hasClass("panel-right")?"right":"left";if(t.length===0||t.hasClass("active"))return false;e.closePanel();e.allowPanelOpen=false;var n=t.hasClass("panel-reveal")?"reveal":"cover";t.css({display:"block"}).addClass("active");t.trigger("open");var r=t[0].clientLeft;var a=n==="reveal"?e(e.getCurrentPage()):t;var s=false;function o(){a.transitionEnd(function(i){if(i.target===a[0]){if(t.hasClass("active")){t.trigger("opened")}else{t.trigger("closed")}e.allowPanelOpen=true}else o()})}o();e(document.body).addClass("with-panel-"+i+"-"+n);return true};e.closePanel=function(){var t=e(".panel.active");if(t.length===0)return false;var i=t.hasClass("panel-reveal")?"reveal":"cover";var n=t.hasClass("panel-left")?"left":"right";t.removeClass("active");var r=i==="reveal"?e(".page"):t;t.trigger("close");e.allowPanelOpen=false;r.transitionEnd(function(){if(t.hasClass("active"))return;t.css({display:""});t.trigger("closed");e("body").removeClass("panel-closing");e.allowPanelOpen=true});e("body").addClass("panel-closing").removeClass("with-panel-"+n+"-"+i)};e(document).on("click",".open-panel",function(t){var i=e(t.target).data("panel");e.openPanel(i)});e(document).on("click",".close-panel, .panel-overlay",function(t){e.closePanel()});e.initSwipePanels=function(){var t,i;var n=e.smConfig.swipePanel;var r=e.smConfig.swipePanelOnlyClose;var a=true;var s=false;var o=2;var l=false;if(!(n||r))return;var c=e(".panel-overlay");var h,f,u,p={},d,m,v,g,y,w,x;var T=e(".page");function C(o){if(!e.allowPanelOpen||!n&&!r||h)return;if(e(".modal-in, .photo-browser-in").length>0)return;if(!(a||r)){if(e(".panel.active").length>0&&!t.hasClass("active"))return}p.x=o.type==="touchstart"?o.targetTouches[0].pageX:o.pageX;p.y=o.type==="touchstart"?o.targetTouches[0].pageY:o.pageY;if(a||r){if(e(".panel.active").length>0){i=e(".panel.active").hasClass("panel-left")?"left":"right"}else{if(r)return;i=n}if(!i)return}t=e(".panel.panel-"+i);if(!t[0])return;g=t.hasClass("active");if(s&&!g){if(i==="left"){if(p.x>s)return}if(i==="right"){if(p.x<window.innerWidth-s)return}}f=false;h=true;u=undefined;d=(new Date).getTime();x=undefined}function b(n){if(!h)return;if(!t[0])return;if(n.f7PreventPanelSwipe)return;var r=n.type==="touchmove"?n.targetTouches[0].pageX:n.pageX;var a=n.type==="touchmove"?n.targetTouches[0].pageY:n.pageY;if(typeof u==="undefined"){u=!!(u||Math.abs(a-p.y)>Math.abs(r-p.x))}if(u){h=false;return}if(!x){if(r>p.x){x="to-right"}else{x="to-left"}if(i==="left"&&(x==="to-left"&&!t.hasClass("active"))||i==="right"&&(x==="to-right"&&!t.hasClass("active"))){h=false;return}}if(l){var s=(new Date).getTime()-d;if(s<300){if(x==="to-left"){if(i==="right")e.openPanel(i);if(i==="left"&&t.hasClass("active"))e.closePanel()}if(x==="to-right"){if(i==="left")e.openPanel(i);if(i==="right"&&t.hasClass("active"))e.closePanel()}}h=false;console.log(3);f=false;return}if(!f){w=t.hasClass("panel-cover")?"cover":"reveal";if(!g){t.show();c.show()}y=t[0].offsetWidth;t.transition(0)}f=true;n.preventDefault();var C=g?0:-o;if(i==="right")C=-C;m=r-p.x+C;if(i==="right"){v=m-(g?y:0);if(v>0)v=0;if(v<-y){v=-y}}else{v=m+(g?y:0);if(v<0)v=0;if(v>y){v=y}}if(w==="reveal"){T.transform("translate3d("+v+"px,0,0)").transition(0);c.transform("translate3d("+v+"px,0,0)")}else{t.transform("translate3d("+v+"px,0,0)").transition(0)}}function k(n){if(!h||!f){h=false;f=false;return}h=false;f=false;var r=(new Date).getTime()-d;var a;var s=v===0||Math.abs(v)===y;if(!g){if(v===0){a="reset"}else if(r<300&&Math.abs(v)>0||r>=300&&Math.abs(v)>=y/2){a="swap"}else{a="reset"}}else{if(v===-y){a="reset"}else if(r<300&&Math.abs(v)>=0||r>=300&&Math.abs(v)<=y/2){if(i==="left"&&v===y)a="reset";else a="swap"}else{a="reset"}}if(a==="swap"){e.allowPanelOpen=true;if(g){e.closePanel();if(s){t.css({display:""});e("body").removeClass("panel-closing")}}else{e.openPanel(i)}if(s)e.allowPanelOpen=true}if(a==="reset"){if(g){e.allowPanelOpen=true;e.openPanel(i)}else{e.closePanel();if(s){e.allowPanelOpen=true;t.css({display:""})}else{var o=w==="reveal"?T:t;e("body").addClass("panel-closing");o.transitionEnd(function(){e.allowPanelOpen=true;t.css({display:""});e("body").removeClass("panel-closing")})}}}if(w==="reveal"){T.transition("");T.transform("")}t.transition("").transform("");c.css({display:""}).transform("")}e(document).on(e.touchEvents.start,C);e(document).on(e.touchEvents.move,b);e(document).on(e.touchEvents.end,k)};e.initSwipePanels()}(Zepto);+function(e){"use strict";if(!window.CustomEvent){window.CustomEvent=function(e,t){t=t||{bubbles:false,cancelable:false,detail:undefined};var i=document.createEvent("CustomEvent");i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return i};window.CustomEvent.prototype=window.Event.prototype}var t={pageLoadStart:"pageLoadStart",pageLoadCancel:"pageLoadCancel",pageLoadError:"pageLoadError",pageLoadComplete:"pageLoadComplete",pageAnimationStart:"pageAnimationStart",pageAnimationEnd:"pageAnimationEnd",beforePageRemove:"beforePageRemove",pageRemoved:"pageRemoved",beforePageSwitch:"beforePageSwitch",pageInit:"pageInitInternal"};var i={getUrlFragment:function(e){var t=e.indexOf("#");return t===-1?"":e.slice(t+1)},getAbsoluteUrl:function(e){var t=document.createElement("a");t.setAttribute("href",e);var i=t.href;t=null;return i},getBaseUrl:function(e){var t=e.indexOf("#");return t===-1?e.slice(0):e.slice(0,t)},toUrlObject:function(e){var t=this.getAbsoluteUrl(e),i=this.getBaseUrl(t),n=this.getUrlFragment(e);return{base:i,full:t,original:e,fragment:n}},supportStorage:function(){var e="sm.router.storage.ability";try{sessionStorage.setItem(e,e);sessionStorage.removeItem(e);return true}catch(e){return false}}};var n={sectionGroupClass:"page-group",curPageClass:"page-current",visiblePageClass:"page-visible",pageClass:"page"};var r={leftToRight:"from-left-to-right",rightToLeft:"from-right-to-left"};var a=window.history;var s=function(){this.sessionNames={currentState:"sm.router.currentState",maxStateId:"sm.router.maxStateId"};this._init();this.xhr=null;window.addEventListener("popstate",this._onPopState.bind(this))};s.prototype._init=function(){this.$view=e("body");this.cache={};var t=e(document);var r=location.href;this._saveDocumentIntoCache(t,r);var s;var o=i.toUrlObject(r);var l=t.find("."+n.pageClass);var c=t.find("."+n.curPageClass);var h=c.eq(0);var f;if(o.fragment){f=t.find("#"+o.fragment)}if(f&&f.length){c=f.eq(0)}else if(!c.length){c=l.eq(0)}if(!c.attr("id")){c.attr("id",this._generateRandomId())}if(h.length&&h.attr("id")!==c.attr("id")){h.removeClass(n.curPageClass);c.addClass(n.curPageClass)}else{c.addClass(n.curPageClass)}s=c.attr("id");if(a.state===null){var u={id:this._getNextStateId(),url:i.toUrlObject(r),pageId:s};a.replaceState(u,"",r);this._saveAsCurrentState(u);this._incMaxStateId()}};s.prototype.load=function(t,n){if(n===undefined){n=false}if(this._isTheSameDocument(location.href,t)){this._switchToSection(i.getUrlFragment(t))}else{this._saveDocumentIntoCache(e(document),location.href);this._switchToDocument(t,n)}};s.prototype.forward=function(){a.forward()};s.prototype.back=function(){a.back()};s.prototype.loadPage=s.prototype.load;s.prototype._switchToSection=function(t){if(!t){return}var i=this._getCurrentSection(),n=e("#"+t);if(i===n){return}this._animateSection(i,n,r.rightToLeft);this._pushNewState("#"+t,t)};s.prototype._switchToDocument=function(e,t,n,r){var a=i.toUrlObject(e).base;if(t){delete this.cache[a]}var s=this.cache[a];var o=this;if(s){this._doSwitchDocument(e,n,r)}else{this._loadDocument(e,{success:function(t){try{o._parseDocument(e,t);o._doSwitchDocument(e,n,r)}catch(t){location.href=e}},error:function(){location.href=e}})}};s.prototype._doSwitchDocument=function(r,a,s){if(typeof a==="undefined"){a=true}var o=i.toUrlObject(r);var l=this.$view.find("."+n.sectionGroupClass);var c=e(e("<div></div>").append(this.cache[o.base].$content).html());var h=c.find("."+n.pageClass);var f=c.find("."+n.curPageClass);var u;if(o.fragment){u=c.find("#"+o.fragment)}if(u&&u.length){f=u.eq(0)}else if(!f.length){f=h.eq(0)}if(!f.attr("id")){f.attr("id",this._generateRandomId())}var p=this._getCurrentSection();p.trigger(t.beforePageSwitch,[p.attr("id"),p]);h.removeClass(n.curPageClass);f.addClass(n.curPageClass);this.$view.prepend(c);this._animateDocument(l,c,f,s);if(a){this._pushNewState(r,f.attr("id"))}};s.prototype._isTheSameDocument=function(e,t){return i.toUrlObject(e).base===i.toUrlObject(t).base};s.prototype._loadDocument=function(i,n){if(this.xhr&&this.xhr.readyState<4){this.xhr.onreadystatechange=function(){};this.xhr.abort();this.dispatch(t.pageLoadCancel)}this.dispatch(t.pageLoadStart);n=n||{};var r=this;this.xhr=e.ajax({url:i,success:e.proxy(function(t,i,r){var a=e("<html></html>");a.append(t);n.success&&n.success.call(null,a,i,r)},this),error:function(e,i,a){n.error&&n.error.call(null,e,i,a);r.dispatch(t.pageLoadError)},complete:function(e,i){n.complete&&n.complete.call(null,e,i);r.dispatch(t.pageLoadComplete)}})};s.prototype._parseDocument=function(e,t){var i=t.find("."+n.sectionGroupClass);if(!i.length){throw new Error("missing router view mark: "+n.sectionGroupClass)}this._saveDocumentIntoCache(t,e)};s.prototype._saveDocumentIntoCache=function(t,r){var a=i.toUrlObject(r).base;var s=e(t);this.cache[a]={$doc:s,$content:s.find("."+n.sectionGroupClass)}};s.prototype._getLastState=function(){var e=sessionStorage.getItem(this.sessionNames.currentState);try{e=JSON.parse(e)}catch(t){e=null}return e};s.prototype._saveAsCurrentState=function(e){sessionStorage.setItem(this.sessionNames.currentState,JSON.stringify(e))};s.prototype._getNextStateId=function(){var e=sessionStorage.getItem(this.sessionNames.maxStateId);return e?parseInt(e,10)+1:1};s.prototype._incMaxStateId=function(){sessionStorage.setItem(this.sessionNames.maxStateId,this._getNextStateId())};s.prototype._animateDocument=function(i,r,a,s){var o=a.attr("id");var l=i.find("."+n.curPageClass);l.addClass(n.visiblePageClass).removeClass(n.curPageClass);a.trigger(t.pageAnimationStart,[o,a]);this._animateElement(i,r,s);i.animationEnd(function(){l.removeClass(n.visiblePageClass);e(window).trigger(t.beforePageRemove,[i]);i.remove();e(window).trigger(t.pageRemoved)});r.animationEnd(function(){a.trigger(t.pageAnimationEnd,[o,a]);a.trigger(t.pageInit,[o,a])})};s.prototype._animateSection=function(e,i,r){var a=i.attr("id");e.trigger(t.beforePageSwitch,[e.attr("id"),e]);e.removeClass(n.curPageClass);i.addClass(n.curPageClass);i.trigger(t.pageAnimationStart,[a,i]);this._animateElement(e,i,r);i.animationEnd(function(){i.trigger(t.pageAnimationEnd,[a,i]);i.trigger(t.pageInit,[a,i])})};s.prototype._animateElement=function(e,t,i){if(typeof i==="undefined"){i=r.rightToLeft}var n=["page-from-center-to-left","page-from-center-to-right","page-from-right-to-center","page-from-left-to-center"].join(" ");var a,s;switch(i){case r.rightToLeft:a="page-from-center-to-left";s="page-from-right-to-center";break;case r.leftToRight:a="page-from-center-to-right";s="page-from-left-to-center";break;default:a="page-from-center-to-left";s="page-from-right-to-center";break}e.removeClass(n).addClass(a);t.removeClass(n).addClass(s);e.animationEnd(function(){e.removeClass(n)});t.animationEnd(function(){t.removeClass(n)})};s.prototype._getCurrentSection=function(){return this.$view.find("."+n.curPageClass).eq(0)};s.prototype._back=function(t,i){if(this._isTheSameDocument(t.url.full,i.url.full)){var n=e("#"+t.pageId);if(n.length){var a=this._getCurrentSection();this._animateSection(a,n,r.leftToRight);this._saveAsCurrentState(t)}else{location.href=t.url.full}}else{this._saveDocumentIntoCache(e(document),i.url.full);this._switchToDocument(t.url.full,false,false,r.leftToRight);this._saveAsCurrentState(t)}};s.prototype._forward=function(t,i){if(this._isTheSameDocument(t.url.full,i.url.full)){var n=e("#"+t.pageId);if(n.length){var a=this._getCurrentSection();this._animateSection(a,n,r.rightToLeft);this._saveAsCurrentState(t)}else{location.href=t.url.full}}else{this._saveDocumentIntoCache(e(document),i.url.full);this._switchToDocument(t.url.full,false,false,r.rightToLeft);this._saveAsCurrentState(t)}};s.prototype._onPopState=function(e){var t=e.state;if(!t||!t.pageId){return}var i=this._getLastState();if(!i){console.error&&console.error("Missing last state when backward or forward");return}if(t.id===i.id){return}if(t.id<i.id){this._back(t,i)}else{this._forward(t,i)}};s.prototype._pushNewState=function(e,t){var n={id:this._getNextStateId(),pageId:t,url:i.toUrlObject(e)};a.pushState(n,"",e);this._saveAsCurrentState(n);this._incMaxStateId()};s.prototype._generateRandomId=function(){return"page-"+ +new Date};s.prototype.dispatch=function(e){var t=new CustomEvent(e,{bubbles:true,cancelable:true});window.dispatchEvent(t)};function o(e){var t=["external","tab-link","open-popup","close-popup","open-panel","close-panel"];for(var i=t.length-1;i>=0;i--){if(e.hasClass(t[i])){return true}}var n=e.get(0);var r=n.getAttribute("href");var a=["http","https"];if(/^(\w+):/.test(r)&&a.indexOf(RegExp.$1)<0){return true}if(n.hasAttribute("external")){return true}return false}function l(t){var i=e.smConfig.routerFilter;if(e.isFunction(i)){var n=i(t);if(typeof n==="boolean"){return n}}return true}e(function(){if(!e.smConfig.router){return}if(!i.supportStorage()){return}var t=e("."+n.pageClass);if(!t.length){var r="Disable router function because of no .page elements";if(window.console&&window.console.warn){console.warn(r)}return}var a=e.router=new s;e(document).on("click","a",function(t){var i=e(t.currentTarget);var n=l(i);if(!n){return}if(o(i)){return}t.preventDefault();if(i.hasClass("back")){a.back()}else{var r=i.attr("href");if(!r||r==="#"){return}var s=i.attr("data-no-cache")==="true";a.load(r,s)}})})}(Zepto);+function(e){"use strict";e.lastPosition=function(t){if(!sessionStorage){return}var i=t.needMemoryClass||[];e(window).off("beforePageSwitch").on("beforePageSwitch",function(e,t,i){r(t,i)});e(window).off("pageAnimationStart").on("pageAnimationStart",function(e,t,i){n(t,i)});function n(t,n){i.forEach(function(i,r){if(e(i).length===0){return}var a=t;var s=sessionStorage.getItem(a);n.find(i).scrollTop(parseInt(s))})}function r(t,n){var r=t;i.forEach(function(t,i){if(e(t).length===0){return}sessionStorage.setItem(r,n.find(t).scrollTop())})}}}(Zepto);+function(e){"use strict";var t=function(){var t=e(".page-current");if(!t[0])t=e(".page").addClass("page-current");return t};e.initPage=function(i){var n=t();if(!n[0])n=e(document.body);var r=n.hasClass("content")?n:n.find(".content");r.scroller();e.initPullToRefresh(r);e.initInfiniteScroll(r);e.initCalendar(r)};if(e.smConfig.showPageLoadingIndicator){e(window).on("pageLoadStart",function(){e.showIndicator()});e(window).on("pageAnimationStart",function(){e.hideIndicator()});e(window).on("pageLoadCancel",function(){e.hideIndicator()});e(window).on("pageLoadComplete",function(){e.hideIndicator()});e(window).on("pageLoadError",function(){e.hideIndicator();e.toast("加载失败")})}e(window).on("pageAnimationStart",function(t,i,n){e.closeModal();e.closePanel();e("body").removeClass("panel-closing");e.allowPanelOpen=true});e(window).on("pageInit",function(){e.hideIndicator();e.lastPosition({needMemoryClass:[".content"]})});window.addEventListener("pageshow",function(e){if(e.persisted){location.reload()}});e.init=function(){var i=t();var n=i[0].id;e.initPage();i.trigger("pageInit",[n,i])};e(function(){FastClick.attach(document.body);if(e.smConfig.autoInit){e.init()}e(document).on("pageInitInternal",function(t,i,n){e.init()})})}(Zepto);+function(e){"use strict";if(e.device.ios){var t=function(e){var t;var i;e=e||document.querySelector(e);if(!e)return;e.addEventListener("touchstart",function(n){t=n.touches[0].pageY;i=e.scrollTop;if(i<=0)e.scrollTop=1;if(i+e.offsetHeight>=e.scrollHeight)e.scrollTop=e.scrollHeight-e.offsetHeight-1},false)};var i=function(){var i=e(".page-current").length>0?".page-current ":"";var n=e(i+".content");new t(n[0])};e(document).on(e.touchEvents.move,".page-current .bar",function(){event.preventDefault()});e(document).on("pageLoadComplete",function(){i()});e(document).on("pageAnimationEnd",function(){i()});i()}}(Zepto);